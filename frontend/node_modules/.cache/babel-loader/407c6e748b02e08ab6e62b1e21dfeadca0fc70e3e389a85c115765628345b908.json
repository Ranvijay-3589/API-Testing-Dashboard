{"ast":null,"code":"import { Trace as BaseTrace } from 'apg-lite';\nimport Expectations from \"./Expectations.mjs\";\nclass Trace extends BaseTrace {\n  inferExpectations() {\n    const lines = this.displayTrace().split('\\n');\n    const expectations = new Set();\n    let collecting = false;\n    let lastMatchedIndex = -1;\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n\n      // capture the max match line (first one that ends in a single character match)\n      if (!collecting && line.includes('M|')) {\n        const textMatch = line.match(/]'(.*)'$/);\n        if (textMatch && textMatch[1]) {\n          lastMatchedIndex = i;\n        }\n      }\n\n      // begin collecting after the deepest successful match\n      if (i > lastMatchedIndex) {\n        const terminalFailMatch = line.match(/N\\|\\[TLS\\(([^)]+)\\)]/);\n        if (terminalFailMatch) {\n          expectations.add(terminalFailMatch[1]);\n        }\n      }\n    }\n    return new Expectations(...expectations);\n  }\n}\nexport default Trace;","map":{"version":3,"names":["Trace","BaseTrace","Expectations","inferExpectations","lines","displayTrace","split","expectations","Set","collecting","lastMatchedIndex","i","length","line","includes","textMatch","match","terminalFailMatch","add"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@swaggerexpert/json-pointer/es/parse/trace/Trace.mjs"],"sourcesContent":["import { Trace as BaseTrace } from 'apg-lite';\nimport Expectations from \"./Expectations.mjs\";\nclass Trace extends BaseTrace {\n  inferExpectations() {\n    const lines = this.displayTrace().split('\\n');\n    const expectations = new Set();\n    let collecting = false;\n    let lastMatchedIndex = -1;\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n\n      // capture the max match line (first one that ends in a single character match)\n      if (!collecting && line.includes('M|')) {\n        const textMatch = line.match(/]'(.*)'$/);\n        if (textMatch && textMatch[1]) {\n          lastMatchedIndex = i;\n        }\n      }\n\n      // begin collecting after the deepest successful match\n      if (i > lastMatchedIndex) {\n        const terminalFailMatch = line.match(/N\\|\\[TLS\\(([^)]+)\\)]/);\n        if (terminalFailMatch) {\n          expectations.add(terminalFailMatch[1]);\n        }\n      }\n    }\n    return new Expectations(...expectations);\n  }\n}\nexport default Trace;"],"mappings":"AAAA,SAASA,KAAK,IAAIC,SAAS,QAAQ,UAAU;AAC7C,OAAOC,YAAY,MAAM,oBAAoB;AAC7C,MAAMF,KAAK,SAASC,SAAS,CAAC;EAC5BE,iBAAiBA,CAAA,EAAG;IAClB,MAAMC,KAAK,GAAG,IAAI,CAACC,YAAY,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,CAAC;IAC7C,MAAMC,YAAY,GAAG,IAAIC,GAAG,CAAC,CAAC;IAC9B,IAAIC,UAAU,GAAG,KAAK;IACtB,IAAIC,gBAAgB,GAAG,CAAC,CAAC;IACzB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,KAAK,CAACQ,MAAM,EAAED,CAAC,EAAE,EAAE;MACrC,MAAME,IAAI,GAAGT,KAAK,CAACO,CAAC,CAAC;;MAErB;MACA,IAAI,CAACF,UAAU,IAAII,IAAI,CAACC,QAAQ,CAAC,IAAI,CAAC,EAAE;QACtC,MAAMC,SAAS,GAAGF,IAAI,CAACG,KAAK,CAAC,UAAU,CAAC;QACxC,IAAID,SAAS,IAAIA,SAAS,CAAC,CAAC,CAAC,EAAE;UAC7BL,gBAAgB,GAAGC,CAAC;QACtB;MACF;;MAEA;MACA,IAAIA,CAAC,GAAGD,gBAAgB,EAAE;QACxB,MAAMO,iBAAiB,GAAGJ,IAAI,CAACG,KAAK,CAAC,sBAAsB,CAAC;QAC5D,IAAIC,iBAAiB,EAAE;UACrBV,YAAY,CAACW,GAAG,CAACD,iBAAiB,CAAC,CAAC,CAAC,CAAC;QACxC;MACF;IACF;IACA,OAAO,IAAIf,YAAY,CAAC,GAAGK,YAAY,CAAC;EAC1C;AACF;AACA,eAAeP,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}