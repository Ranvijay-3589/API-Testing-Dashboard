{"ast":null,"code":"import { Parser } from 'apg-lite';\nimport Grammar from \"../../../grammar.mjs\";\nimport { percentEncodeChar, isQuoted as isQuotedPredicate, unquote, quote } from \"../../../utils.mjs\";\nimport testCookieValue from \"../../../cookie/test/cookie-value.mjs\";\nconst parser = new Parser();\nconst grammar = new Grammar();\nconst cookieValueStrictPercentEncoder = cookieValue => {\n  const value = String(cookieValue);\n\n  // return early if the value is already valid\n  if (testCookieValue(value)) return value;\n\n  // detect if the value is quoted\n  const isQuoted = isQuotedPredicate(value);\n\n  // remove quotes if present for processing\n  const valueToEncode = isQuoted ? unquote(value) : value;\n  let result = '';\n  for (const char of valueToEncode) {\n    result += parser.parse(grammar, 'cookie-octet', char).success ? char : percentEncodeChar(char);\n  }\n\n  // return quoted if input was quoted, unquoted otherwise\n  return isQuoted ? quote(result) : result;\n};\nexport default cookieValueStrictPercentEncoder;","map":{"version":3,"names":["Parser","Grammar","percentEncodeChar","isQuoted","isQuotedPredicate","unquote","quote","testCookieValue","parser","grammar","cookieValueStrictPercentEncoder","cookieValue","value","String","valueToEncode","result","char","parse","success"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@swaggerexpert/cookie/es/set-cookie/serialize/encoders/cookie-value-strict-percent.mjs"],"sourcesContent":["import { Parser } from 'apg-lite';\nimport Grammar from \"../../../grammar.mjs\";\nimport { percentEncodeChar, isQuoted as isQuotedPredicate, unquote, quote } from \"../../../utils.mjs\";\nimport testCookieValue from \"../../../cookie/test/cookie-value.mjs\";\nconst parser = new Parser();\nconst grammar = new Grammar();\nconst cookieValueStrictPercentEncoder = cookieValue => {\n  const value = String(cookieValue);\n\n  // return early if the value is already valid\n  if (testCookieValue(value)) return value;\n\n  // detect if the value is quoted\n  const isQuoted = isQuotedPredicate(value);\n\n  // remove quotes if present for processing\n  const valueToEncode = isQuoted ? unquote(value) : value;\n  let result = '';\n  for (const char of valueToEncode) {\n    result += parser.parse(grammar, 'cookie-octet', char).success ? char : percentEncodeChar(char);\n  }\n\n  // return quoted if input was quoted, unquoted otherwise\n  return isQuoted ? quote(result) : result;\n};\nexport default cookieValueStrictPercentEncoder;"],"mappings":"AAAA,SAASA,MAAM,QAAQ,UAAU;AACjC,OAAOC,OAAO,MAAM,sBAAsB;AAC1C,SAASC,iBAAiB,EAAEC,QAAQ,IAAIC,iBAAiB,EAAEC,OAAO,EAAEC,KAAK,QAAQ,oBAAoB;AACrG,OAAOC,eAAe,MAAM,uCAAuC;AACnE,MAAMC,MAAM,GAAG,IAAIR,MAAM,CAAC,CAAC;AAC3B,MAAMS,OAAO,GAAG,IAAIR,OAAO,CAAC,CAAC;AAC7B,MAAMS,+BAA+B,GAAGC,WAAW,IAAI;EACrD,MAAMC,KAAK,GAAGC,MAAM,CAACF,WAAW,CAAC;;EAEjC;EACA,IAAIJ,eAAe,CAACK,KAAK,CAAC,EAAE,OAAOA,KAAK;;EAExC;EACA,MAAMT,QAAQ,GAAGC,iBAAiB,CAACQ,KAAK,CAAC;;EAEzC;EACA,MAAME,aAAa,GAAGX,QAAQ,GAAGE,OAAO,CAACO,KAAK,CAAC,GAAGA,KAAK;EACvD,IAAIG,MAAM,GAAG,EAAE;EACf,KAAK,MAAMC,IAAI,IAAIF,aAAa,EAAE;IAChCC,MAAM,IAAIP,MAAM,CAACS,KAAK,CAACR,OAAO,EAAE,cAAc,EAAEO,IAAI,CAAC,CAACE,OAAO,GAAGF,IAAI,GAAGd,iBAAiB,CAACc,IAAI,CAAC;EAChG;;EAEA;EACA,OAAOb,QAAQ,GAAGG,KAAK,CAACS,MAAM,CAAC,GAAGA,MAAM;AAC1C,CAAC;AACD,eAAeL,+BAA+B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}