{"ast":null,"code":"import { Parser } from 'apg-lite';\nimport Grammar from \"../path-templating.mjs\";\nimport parse from \"../parse/index.mjs\";\n/**\n * Implementation of https://datatracker.ietf.org/doc/html/rfc3986#section-6.2.2.2\n */\nconst significantTypes = ['slash', 'path-literal', 'template-expression'];\nconst grammar = new Grammar();\nconst parser = new Parser();\nconst percentEndingNormalizer = pathTemplate => {\n  const parseResult = parse(pathTemplate);\n  if (!parseResult.result.success) return pathTemplate;\n  const parts = [];\n  parseResult.ast.translate(parts);\n  return parts.reduce((pathTemplateNormalized, _ref) => {\n    let [type, value] = _ref;\n    let normalizedValue = value;\n    if (type === 'path-literal') {\n      normalizedValue = value.replace(/%[0-9a-fA-F]{2}/g, match => {\n        try {\n          const char = decodeURIComponent(match);\n          const {\n            success\n          } = parser.parse(grammar, 'unreserved', char);\n          return success ? char : match;\n        } catch (_unused) {\n          return match;\n        }\n      });\n    }\n    if (significantTypes.includes(type)) {\n      return \"\".concat(pathTemplateNormalized).concat(normalizedValue);\n    }\n    return pathTemplateNormalized;\n  }, '');\n};\nexport default percentEndingNormalizer;","map":{"version":3,"names":["Parser","Grammar","parse","significantTypes","grammar","parser","percentEndingNormalizer","pathTemplate","parseResult","result","success","parts","ast","translate","reduce","pathTemplateNormalized","_ref","type","value","normalizedValue","replace","match","char","decodeURIComponent","_unused","includes","concat"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/openapi-path-templating/es/normalization/percent-encoding.mjs"],"sourcesContent":["import { Parser } from 'apg-lite';\nimport Grammar from \"../path-templating.mjs\";\nimport parse from \"../parse/index.mjs\";\n/**\n * Implementation of https://datatracker.ietf.org/doc/html/rfc3986#section-6.2.2.2\n */\nconst significantTypes = ['slash', 'path-literal', 'template-expression'];\nconst grammar = new Grammar();\nconst parser = new Parser();\nconst percentEndingNormalizer = pathTemplate => {\n  const parseResult = parse(pathTemplate);\n  if (!parseResult.result.success) return pathTemplate;\n  const parts = [];\n  parseResult.ast.translate(parts);\n  return parts.reduce((pathTemplateNormalized, [type, value]) => {\n    let normalizedValue = value;\n    if (type === 'path-literal') {\n      normalizedValue = value.replace(/%[0-9a-fA-F]{2}/g, match => {\n        try {\n          const char = decodeURIComponent(match);\n          const {\n            success\n          } = parser.parse(grammar, 'unreserved', char);\n          return success ? char : match;\n        } catch {\n          return match;\n        }\n      });\n    }\n    if (significantTypes.includes(type)) {\n      return `${pathTemplateNormalized}${normalizedValue}`;\n    }\n    return pathTemplateNormalized;\n  }, '');\n};\nexport default percentEndingNormalizer;"],"mappings":"AAAA,SAASA,MAAM,QAAQ,UAAU;AACjC,OAAOC,OAAO,MAAM,wBAAwB;AAC5C,OAAOC,KAAK,MAAM,oBAAoB;AACtC;AACA;AACA;AACA,MAAMC,gBAAgB,GAAG,CAAC,OAAO,EAAE,cAAc,EAAE,qBAAqB,CAAC;AACzE,MAAMC,OAAO,GAAG,IAAIH,OAAO,CAAC,CAAC;AAC7B,MAAMI,MAAM,GAAG,IAAIL,MAAM,CAAC,CAAC;AAC3B,MAAMM,uBAAuB,GAAGC,YAAY,IAAI;EAC9C,MAAMC,WAAW,GAAGN,KAAK,CAACK,YAAY,CAAC;EACvC,IAAI,CAACC,WAAW,CAACC,MAAM,CAACC,OAAO,EAAE,OAAOH,YAAY;EACpD,MAAMI,KAAK,GAAG,EAAE;EAChBH,WAAW,CAACI,GAAG,CAACC,SAAS,CAACF,KAAK,CAAC;EAChC,OAAOA,KAAK,CAACG,MAAM,CAAC,CAACC,sBAAsB,EAAAC,IAAA,KAAoB;IAAA,IAAlB,CAACC,IAAI,EAAEC,KAAK,CAAC,GAAAF,IAAA;IACxD,IAAIG,eAAe,GAAGD,KAAK;IAC3B,IAAID,IAAI,KAAK,cAAc,EAAE;MAC3BE,eAAe,GAAGD,KAAK,CAACE,OAAO,CAAC,kBAAkB,EAAEC,KAAK,IAAI;QAC3D,IAAI;UACF,MAAMC,IAAI,GAAGC,kBAAkB,CAACF,KAAK,CAAC;UACtC,MAAM;YACJX;UACF,CAAC,GAAGL,MAAM,CAACH,KAAK,CAACE,OAAO,EAAE,YAAY,EAAEkB,IAAI,CAAC;UAC7C,OAAOZ,OAAO,GAAGY,IAAI,GAAGD,KAAK;QAC/B,CAAC,CAAC,OAAAG,OAAA,EAAM;UACN,OAAOH,KAAK;QACd;MACF,CAAC,CAAC;IACJ;IACA,IAAIlB,gBAAgB,CAACsB,QAAQ,CAACR,IAAI,CAAC,EAAE;MACnC,UAAAS,MAAA,CAAUX,sBAAsB,EAAAW,MAAA,CAAGP,eAAe;IACpD;IACA,OAAOJ,sBAAsB;EAC/B,CAAC,EAAE,EAAE,CAAC;AACR,CAAC;AACD,eAAeT,uBAAuB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}