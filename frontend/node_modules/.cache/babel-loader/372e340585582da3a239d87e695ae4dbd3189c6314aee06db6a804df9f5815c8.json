{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useSearchParams}from'react-router-dom';import SwaggerUI from'swagger-ui-react';import'swagger-ui-react/swagger-ui.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SwaggerPage=()=>{const[searchParams]=useSearchParams();const defaultTab=searchParams.get('tab')==='doc'?'doc':'ui';const[activeTab,setActiveTab]=useState(defaultTab);const[swaggerDoc,setSwaggerDoc]=useState('');const[swaggerLoading,setSwaggerLoading]=useState(false);const[swaggerError,setSwaggerError]=useState('');const[swaggerSpec,setSwaggerSpec]=useState(null);const[specLoading,setSpecLoading]=useState(true);const[specError,setSpecError]=useState('');const apiBase=process.env.REACT_APP_API_BASE_URL||'/mohit/api';// Fetch the OpenAPI spec on mount and pass it directly to SwaggerUI\n// This ensures the correct server URL is used instead of Swagger UI resolving it incorrectly\nuseEffect(()=>{const fetchSpec=async()=>{try{const res=await fetch(\"\".concat(apiBase,\"/openapi.json\"));if(!res.ok){throw new Error(\"Failed to load OpenAPI spec (\".concat(res.status,\")\"));}const data=await res.json();// Ensure the server URL points to the correct /mohit/api path\ndata.servers=[{url:'https://ranvijay.capricorn.online/mohit/api',description:'Production API Server'}];setSwaggerSpec(data);}catch(error){setSpecError(error.message||'Failed to load OpenAPI spec');}finally{setSpecLoading(false);}};fetchSpec();},[apiBase]);const handleDocTab=useCallback(async()=>{setActiveTab('doc');if(swaggerDoc||swaggerLoading)return;setSwaggerError('');setSwaggerLoading(true);try{const res=await fetch(\"\".concat(apiBase,\"/openapi.json\"));if(!res.ok){throw new Error(\"Failed to load OpenAPI JSON (\".concat(res.status,\")\"));}const data=await res.json();setSwaggerDoc(JSON.stringify(data,null,2));}catch(error){setSwaggerError(error.message||'Failed to load OpenAPI JSON');}finally{setSwaggerLoading(false);}},[apiBase,swaggerDoc,swaggerLoading]);return/*#__PURE__*/_jsx(\"div\",{className:\"container py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3\",children:\"API Documentation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-sm \".concat(activeTab==='ui'?'btn-primary':'btn-outline-primary'),onClick:()=>setActiveTab('ui'),children:\"Swagger UI\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-sm \".concat(activeTab==='doc'?'btn-primary':'btn-outline-primary'),onClick:handleDocTab,children:\"Swagger Doc\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[activeTab==='ui'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded border p-2\",style:{maxHeight:'700px',overflow:'auto'},children:[specLoading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Loading Swagger UI...\"}),specError&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:specError}),!specLoading&&!specError&&swaggerSpec&&/*#__PURE__*/_jsx(SwaggerUI,{spec:swaggerSpec})]}),activeTab==='doc'&&/*#__PURE__*/_jsxs(_Fragment,{children:[swaggerLoading&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-muted\",children:\"Loading OpenAPI JSON...\"}),swaggerError&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mb-0\",children:swaggerError}),!swaggerLoading&&!swaggerError&&swaggerDoc&&/*#__PURE__*/_jsx(\"pre\",{className:\"bg-dark text-light p-3 rounded\",style:{maxHeight:'500px',overflow:'auto',fontSize:'0.875rem'},children:swaggerDoc})]})]})]})});};export default SwaggerPage;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useSearchParams","SwaggerUI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SwaggerPage","searchParams","defaultTab","get","activeTab","setActiveTab","swaggerDoc","setSwaggerDoc","swaggerLoading","setSwaggerLoading","swaggerError","setSwaggerError","swaggerSpec","setSwaggerSpec","specLoading","setSpecLoading","specError","setSpecError","apiBase","process","env","REACT_APP_API_BASE_URL","fetchSpec","res","fetch","concat","ok","Error","status","data","json","servers","url","description","error","message","handleDocTab","JSON","stringify","className","children","type","onClick","style","maxHeight","overflow","spec","fontSize"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/src/pages/SwaggerPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport SwaggerUI from 'swagger-ui-react';\nimport 'swagger-ui-react/swagger-ui.css';\n\nconst SwaggerPage = () => {\n  const [searchParams] = useSearchParams();\n  const defaultTab = searchParams.get('tab') === 'doc' ? 'doc' : 'ui';\n\n  const [activeTab, setActiveTab] = useState(defaultTab);\n  const [swaggerDoc, setSwaggerDoc] = useState('');\n  const [swaggerLoading, setSwaggerLoading] = useState(false);\n  const [swaggerError, setSwaggerError] = useState('');\n  const [swaggerSpec, setSwaggerSpec] = useState(null);\n  const [specLoading, setSpecLoading] = useState(true);\n  const [specError, setSpecError] = useState('');\n\n  const apiBase = process.env.REACT_APP_API_BASE_URL || '/mohit/api';\n\n  // Fetch the OpenAPI spec on mount and pass it directly to SwaggerUI\n  // This ensures the correct server URL is used instead of Swagger UI resolving it incorrectly\n  useEffect(() => {\n    const fetchSpec = async () => {\n      try {\n        const res = await fetch(`${apiBase}/openapi.json`);\n        if (!res.ok) {\n          throw new Error(`Failed to load OpenAPI spec (${res.status})`);\n        }\n        const data = await res.json();\n        // Ensure the server URL points to the correct /mohit/api path\n        data.servers = [\n          {\n            url: 'https://ranvijay.capricorn.online/mohit/api',\n            description: 'Production API Server',\n          },\n        ];\n        setSwaggerSpec(data);\n      } catch (error) {\n        setSpecError(error.message || 'Failed to load OpenAPI spec');\n      } finally {\n        setSpecLoading(false);\n      }\n    };\n    fetchSpec();\n  }, [apiBase]);\n\n  const handleDocTab = useCallback(async () => {\n    setActiveTab('doc');\n    if (swaggerDoc || swaggerLoading) return;\n\n    setSwaggerError('');\n    setSwaggerLoading(true);\n    try {\n      const res = await fetch(`${apiBase}/openapi.json`);\n      if (!res.ok) {\n        throw new Error(`Failed to load OpenAPI JSON (${res.status})`);\n      }\n      const data = await res.json();\n      setSwaggerDoc(JSON.stringify(data, null, 2));\n    } catch (error) {\n      setSwaggerError(error.message || 'Failed to load OpenAPI JSON');\n    } finally {\n      setSwaggerLoading(false);\n    }\n  }, [apiBase, swaggerDoc, swaggerLoading]);\n\n  return (\n    <div className=\"container py-4\">\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <h5 className=\"mb-3\">API Documentation</h5>\n          <div className=\"d-flex gap-2\">\n            <button\n              type=\"button\"\n              className={`btn btn-sm ${activeTab === 'ui' ? 'btn-primary' : 'btn-outline-primary'}`}\n              onClick={() => setActiveTab('ui')}\n            >\n              Swagger UI\n            </button>\n            <button\n              type=\"button\"\n              className={`btn btn-sm ${activeTab === 'doc' ? 'btn-primary' : 'btn-outline-primary'}`}\n              onClick={handleDocTab}\n            >\n              Swagger Doc\n            </button>\n          </div>\n        </div>\n        <div className=\"card-body\">\n          {activeTab === 'ui' && (\n            <div className=\"bg-white rounded border p-2\" style={{ maxHeight: '700px', overflow: 'auto' }}>\n              {specLoading && <p className=\"text-muted\">Loading Swagger UI...</p>}\n              {specError && <div className=\"alert alert-danger\">{specError}</div>}\n              {!specLoading && !specError && swaggerSpec && (\n                <SwaggerUI spec={swaggerSpec} />\n              )}\n            </div>\n          )}\n\n          {activeTab === 'doc' && (\n            <>\n              {swaggerLoading && <p className=\"mb-0 text-muted\">Loading OpenAPI JSON...</p>}\n              {swaggerError && <div className=\"alert alert-danger mb-0\">{swaggerError}</div>}\n              {!swaggerLoading && !swaggerError && swaggerDoc && (\n                <pre\n                  className=\"bg-dark text-light p-3 rounded\"\n                  style={{ maxHeight: '500px', overflow: 'auto', fontSize: '0.875rem' }}\n                >\n                  {swaggerDoc}\n                </pre>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SwaggerPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}