{"ast":null,"code":"import _objectSpread from \"/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { isEmpty } from 'ramda';\nimport File from \"../File.mjs\";\nimport * as plugins from \"../util/plugins.mjs\";\nimport ResolveError from \"../errors/ResolveError.mjs\";\nimport UnmatchedResolverError from \"../errors/UnmatchedResolverError.mjs\";\nconst CACHE_NAME = 'apidom-file-cache';\nconst getCacheFileResult = async _ref2 => {\n  let {\n    cacheKey,\n    cacheTTL\n  } = _ref2;\n  if (cacheTTL === 0) {\n    return {\n      cachedResult: null,\n      cachedError: null\n    };\n  }\n  try {\n    const cache = await caches.open(CACHE_NAME);\n    const response = await cache.match(cacheKey);\n    if (response) {\n      const {\n        cachedResult,\n        cachedError,\n        timestamp\n      } = await response.json();\n      const now = Date.now();\n\n      // Check if the cache is still valid\n      if (now - timestamp < cacheTTL) {\n        return {\n          cachedResult,\n          cachedError\n        };\n      }\n      await cache.delete(cacheKey);\n    }\n  } catch (error) {\n    // If parsing cache fails, continue with normal parsing\n    console.log('There was an error parsing the response');\n    return {\n      cachedResult: null,\n      cachedError: null\n    };\n  }\n  return {\n    cachedResult: null,\n    cachedError: null\n  };\n};\nconst setCacheFileResult = async _ref3 => {\n  let {\n    cacheKey,\n    result,\n    error,\n    cacheTTL\n  } = _ref3;\n  if (cacheTTL === 0) {\n    return;\n  }\n  try {\n    const cacheData = {\n      cachedResult: result,\n      cachedError: error,\n      timestamp: Date.now()\n    };\n    const cache = await caches.open(CACHE_NAME);\n    const response = new Response(JSON.stringify(cacheData), {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    await cache.put(cacheKey, response);\n  } catch (err) {\n    // Silently fail if CacheStorage is not available\n    console.error('CacheStorage is not available');\n  }\n};\n\n/**\n * Reads the given file, using the configured resolver plugins.\n */\n// eslint-disable-next-line import/prefer-default-export\nexport const readFile = async (file, options) => {\n  const {\n    cacheTTL = 0\n  } = options.resolve.resolverOpts;\n  const cacheKey = \"read_\".concat(file.uri);\n  const {\n    cachedResult,\n    cachedError\n  } = await getCacheFileResult({\n    cacheKey,\n    cacheTTL\n  });\n  if (cachedResult !== null) {\n    return cachedResult;\n  }\n  if (cachedError !== null) {\n    throw new ResolveError(\"Error while reading file \\\"\".concat(file.uri, \"\\\"\"), {\n      cause: cachedError\n    });\n  }\n  const optsBoundResolvers = options.resolve.resolvers.map(resolver => {\n    const clonedResolver = Object.create(resolver);\n    return Object.assign(clonedResolver, options.resolve.resolverOpts);\n  });\n  const resolvers = await plugins.filter('canRead', [file, options], optsBoundResolvers);\n\n  // we couldn't find any resolver for this File\n  if (isEmpty(resolvers)) {\n    throw new UnmatchedResolverError(file.uri);\n  }\n  try {\n    const {\n      result\n    } = await plugins.run('read', [file], resolvers);\n    const stringifiedData = new File(_objectSpread(_objectSpread({}, file), {}, {\n      data: result\n    })).toString();\n    await setCacheFileResult({\n      cacheKey,\n      result: stringifiedData,\n      error: null,\n      cacheTTL\n    });\n    return result;\n  } catch (error) {\n    var _ref, _error$cause$cause, _error$cause;\n    await setCacheFileResult({\n      cacheKey,\n      result: null,\n      error: (_ref = (_error$cause$cause = error === null || error === void 0 || (_error$cause = error.cause) === null || _error$cause === void 0 ? void 0 : _error$cause.cause) !== null && _error$cause$cause !== void 0 ? _error$cause$cause : error === null || error === void 0 ? void 0 : error.cause) !== null && _ref !== void 0 ? _ref : error,\n      cacheTTL\n    });\n    throw new ResolveError(\"Error while reading file \\\"\".concat(file.uri, \"\\\"\"), {\n      cause: error\n    });\n  }\n};","map":{"version":3,"names":["isEmpty","File","plugins","ResolveError","UnmatchedResolverError","CACHE_NAME","getCacheFileResult","_ref2","cacheKey","cacheTTL","cachedResult","cachedError","cache","caches","open","response","match","timestamp","json","now","Date","delete","error","console","log","setCacheFileResult","_ref3","result","cacheData","Response","JSON","stringify","headers","put","err","readFile","file","options","resolve","resolverOpts","concat","uri","cause","optsBoundResolvers","resolvers","map","resolver","clonedResolver","Object","create","assign","filter","run","stringifiedData","_objectSpread","data","toString","_ref","_error$cause$cause","_error$cause"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@swagger-api/apidom-reference/src/resolve/util.mjs"],"sourcesContent":["import { isEmpty } from 'ramda';\nimport File from \"../File.mjs\";\nimport * as plugins from \"../util/plugins.mjs\";\nimport ResolveError from \"../errors/ResolveError.mjs\";\nimport UnmatchedResolverError from \"../errors/UnmatchedResolverError.mjs\";\nconst CACHE_NAME = 'apidom-file-cache';\nconst getCacheFileResult = async ({\n  cacheKey,\n  cacheTTL\n}) => {\n  if (cacheTTL === 0) {\n    return {\n      cachedResult: null,\n      cachedError: null\n    };\n  }\n  try {\n    const cache = await caches.open(CACHE_NAME);\n    const response = await cache.match(cacheKey);\n    if (response) {\n      const {\n        cachedResult,\n        cachedError,\n        timestamp\n      } = await response.json();\n      const now = Date.now();\n\n      // Check if the cache is still valid\n      if (now - timestamp < cacheTTL) {\n        return {\n          cachedResult,\n          cachedError\n        };\n      }\n      await cache.delete(cacheKey);\n    }\n  } catch (error) {\n    // If parsing cache fails, continue with normal parsing\n    console.log('There was an error parsing the response');\n    return {\n      cachedResult: null,\n      cachedError: null\n    };\n  }\n  return {\n    cachedResult: null,\n    cachedError: null\n  };\n};\nconst setCacheFileResult = async ({\n  cacheKey,\n  result,\n  error,\n  cacheTTL\n}) => {\n  if (cacheTTL === 0) {\n    return;\n  }\n  try {\n    const cacheData = {\n      cachedResult: result,\n      cachedError: error,\n      timestamp: Date.now()\n    };\n    const cache = await caches.open(CACHE_NAME);\n    const response = new Response(JSON.stringify(cacheData), {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    await cache.put(cacheKey, response);\n  } catch (err) {\n    // Silently fail if CacheStorage is not available\n    console.error('CacheStorage is not available');\n  }\n};\n\n/**\n * Reads the given file, using the configured resolver plugins.\n */\n// eslint-disable-next-line import/prefer-default-export\nexport const readFile = async (file, options) => {\n  const {\n    cacheTTL = 0\n  } = options.resolve.resolverOpts;\n  const cacheKey = `read_${file.uri}`;\n  const {\n    cachedResult,\n    cachedError\n  } = await getCacheFileResult({\n    cacheKey,\n    cacheTTL\n  });\n  if (cachedResult !== null) {\n    return cachedResult;\n  }\n  if (cachedError !== null) {\n    throw new ResolveError(`Error while reading file \"${file.uri}\"`, {\n      cause: cachedError\n    });\n  }\n  const optsBoundResolvers = options.resolve.resolvers.map(resolver => {\n    const clonedResolver = Object.create(resolver);\n    return Object.assign(clonedResolver, options.resolve.resolverOpts);\n  });\n  const resolvers = await plugins.filter('canRead', [file, options], optsBoundResolvers);\n\n  // we couldn't find any resolver for this File\n  if (isEmpty(resolvers)) {\n    throw new UnmatchedResolverError(file.uri);\n  }\n  try {\n    const {\n      result\n    } = await plugins.run('read', [file], resolvers);\n    const stringifiedData = new File({\n      ...file,\n      data: result\n    }).toString();\n    await setCacheFileResult({\n      cacheKey,\n      result: stringifiedData,\n      error: null,\n      cacheTTL\n    });\n    return result;\n  } catch (error) {\n    var _ref, _error$cause$cause, _error$cause;\n    await setCacheFileResult({\n      cacheKey,\n      result: null,\n      error: (_ref = (_error$cause$cause = error === null || error === void 0 || (_error$cause = error.cause) === null || _error$cause === void 0 ? void 0 : _error$cause.cause) !== null && _error$cause$cause !== void 0 ? _error$cause$cause : error === null || error === void 0 ? void 0 : error.cause) !== null && _ref !== void 0 ? _ref : error,\n      cacheTTL\n    });\n    throw new ResolveError(`Error while reading file \"${file.uri}\"`, {\n      cause: error\n    });\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}