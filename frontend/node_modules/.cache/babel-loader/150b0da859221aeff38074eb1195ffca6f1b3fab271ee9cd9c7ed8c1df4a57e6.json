{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import api from'../services/api';import ResponseViewer from'../components/ResponseViewer';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RequestBuilder=()=>{const location=useLocation();const[method,setMethod]=useState('GET');const[url,setUrl]=useState('');const[headers,setHeaders]=useState('');const[body,setBody]=useState('');const[response,setResponse]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');useEffect(()=>{var _location$state;if((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.request){const req=location.state.request;setMethod(req.method||'GET');setUrl(req.url||'');setHeaders(req.headers&&Object.keys(req.headers).length>0?JSON.stringify(req.headers,null,2):'');setBody(req.body?JSON.stringify(req.body,null,2):'');}},[location.state]);const handleSend=async e=>{e.preventDefault();setError('');setResponse(null);if(!url.trim()){setError('URL is required');return;}let parsedHeaders={};if(headers.trim()){try{parsedHeaders=JSON.parse(headers);}catch(_unused){setError('Headers must be valid JSON');return;}}let parsedBody=null;if(body.trim()&&['POST','PUT','PATCH'].includes(method)){try{parsedBody=JSON.parse(body);}catch(_unused2){setError('Body must be valid JSON');return;}}setLoading(true);try{const res=await api.post('/request/send',{method,url:url.trim(),headers:parsedHeaders,body:parsedBody});setResponse(res.data);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Failed to send request');}finally{setLoading(false);}};const getMethodColor=m=>{const colors={GET:'text-bg-success',POST:'text-bg-primary',PUT:'text-bg-warning',DELETE:'text-bg-danger',PATCH:'text-bg-info'};return colors[m]||'text-bg-secondary';};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-4\",children:\"Request Builder\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSend,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row g-2 mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select fw-bold \".concat(getMethodColor(method)),value:method,onChange:e=>setMethod(e.target.value),style:{width:'130px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"GET\",children:\"GET\"}),/*#__PURE__*/_jsx(\"option\",{value:\"POST\",children:\"POST\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PUT\",children:\"PUT\"}),/*#__PURE__*/_jsx(\"option\",{value:\"DELETE\",children:\"DELETE\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PATCH\",children:\"PATCH\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Enter request URL (e.g. https://jsonplaceholder.typicode.com/posts/1)\",value:url,onChange:e=>setUrl(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-1\",role:\"status\"}),\"Sending...\"]}):'Send'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Headers (JSON)\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control font-monospace\",rows:\"5\",placeholder:\"{\\\"Content-Type\\\": \\\"application/json\\\"}\",value:headers,onChange:e=>setHeaders(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label fw-semibold\",children:\"Body (JSON)\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control font-monospace\",rows:\"5\",placeholder:\"{\\\"key\\\": \\\"value\\\"}\",value:body,onChange:e=>setBody(e.target.value),disabled:!['POST','PUT','PATCH'].includes(method)})]})]})]}),/*#__PURE__*/_jsx(ResponseViewer,{response:response})]});};export default RequestBuilder;","map":{"version":3,"names":["React","useState","useEffect","useLocation","api","ResponseViewer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RequestBuilder","location","method","setMethod","url","setUrl","headers","setHeaders","body","setBody","response","setResponse","loading","setLoading","error","setError","_location$state","state","request","req","Object","keys","length","JSON","stringify","handleSend","e","preventDefault","trim","parsedHeaders","parse","_unused","parsedBody","includes","_unused2","res","post","data","err","_err$response","_err$response$data","message","getMethodColor","m","colors","GET","POST","PUT","DELETE","PATCH","className","children","onSubmit","concat","value","onChange","target","style","width","type","placeholder","required","disabled","role","rows"],"sources":["/home/cmdcmd007/projects/api-testing-dashboard/frontend/src/pages/RequestBuilder.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport api from '../services/api';\nimport ResponseViewer from '../components/ResponseViewer';\n\nconst RequestBuilder = () => {\n  const location = useLocation();\n  const [method, setMethod] = useState('GET');\n  const [url, setUrl] = useState('');\n  const [headers, setHeaders] = useState('');\n  const [body, setBody] = useState('');\n  const [response, setResponse] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (location.state?.request) {\n      const req = location.state.request;\n      setMethod(req.method || 'GET');\n      setUrl(req.url || '');\n      setHeaders(\n        req.headers && Object.keys(req.headers).length > 0\n          ? JSON.stringify(req.headers, null, 2)\n          : ''\n      );\n      setBody(req.body ? JSON.stringify(req.body, null, 2) : '');\n    }\n  }, [location.state]);\n\n  const handleSend = async (e) => {\n    e.preventDefault();\n    setError('');\n    setResponse(null);\n\n    if (!url.trim()) {\n      setError('URL is required');\n      return;\n    }\n\n    let parsedHeaders = {};\n    if (headers.trim()) {\n      try {\n        parsedHeaders = JSON.parse(headers);\n      } catch {\n        setError('Headers must be valid JSON');\n        return;\n      }\n    }\n\n    let parsedBody = null;\n    if (body.trim() && ['POST', 'PUT', 'PATCH'].includes(method)) {\n      try {\n        parsedBody = JSON.parse(body);\n      } catch {\n        setError('Body must be valid JSON');\n        return;\n      }\n    }\n\n    setLoading(true);\n    try {\n      const res = await api.post('/request/send', {\n        method,\n        url: url.trim(),\n        headers: parsedHeaders,\n        body: parsedBody,\n      });\n      setResponse(res.data);\n    } catch (err) {\n      setError(err.response?.data?.message || 'Failed to send request');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getMethodColor = (m) => {\n    const colors = {\n      GET: 'text-bg-success',\n      POST: 'text-bg-primary',\n      PUT: 'text-bg-warning',\n      DELETE: 'text-bg-danger',\n      PATCH: 'text-bg-info',\n    };\n    return colors[m] || 'text-bg-secondary';\n  };\n\n  return (\n    <div className=\"container mt-4\">\n      <h3 className=\"mb-4\">Request Builder</h3>\n      {error && <div className=\"alert alert-danger\">{error}</div>}\n\n      <form onSubmit={handleSend}>\n        <div className=\"row g-2 mb-3\">\n          <div className=\"col-auto\">\n            <select\n              className={`form-select fw-bold ${getMethodColor(method)}`}\n              value={method}\n              onChange={(e) => setMethod(e.target.value)}\n              style={{ width: '130px' }}\n            >\n              <option value=\"GET\">GET</option>\n              <option value=\"POST\">POST</option>\n              <option value=\"PUT\">PUT</option>\n              <option value=\"DELETE\">DELETE</option>\n              <option value=\"PATCH\">PATCH</option>\n            </select>\n          </div>\n          <div className=\"col\">\n            <input\n              type=\"text\"\n              className=\"form-control\"\n              placeholder=\"Enter request URL (e.g. https://jsonplaceholder.typicode.com/posts/1)\"\n              value={url}\n              onChange={(e) => setUrl(e.target.value)}\n              required\n            />\n          </div>\n          <div className=\"col-auto\">\n            <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\n              {loading ? (\n                <>\n                  <span className=\"spinner-border spinner-border-sm me-1\" role=\"status\"></span>\n                  Sending...\n                </>\n              ) : (\n                'Send'\n              )}\n            </button>\n          </div>\n        </div>\n\n        <div className=\"row g-3\">\n          <div className=\"col-md-6\">\n            <label className=\"form-label fw-semibold\">Headers (JSON)</label>\n            <textarea\n              className=\"form-control font-monospace\"\n              rows=\"5\"\n              placeholder='{\"Content-Type\": \"application/json\"}'\n              value={headers}\n              onChange={(e) => setHeaders(e.target.value)}\n            />\n          </div>\n          <div className=\"col-md-6\">\n            <label className=\"form-label fw-semibold\">Body (JSON)</label>\n            <textarea\n              className=\"form-control font-monospace\"\n              rows=\"5\"\n              placeholder='{\"key\": \"value\"}'\n              value={body}\n              onChange={(e) => setBody(e.target.value)}\n              disabled={!['POST', 'PUT', 'PATCH'].includes(method)}\n            />\n          </div>\n        </div>\n      </form>\n\n      <ResponseViewer response={response} />\n    </div>\n  );\n};\n\nexport default RequestBuilder;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}