{"ast":null,"code":"import _defineProperty from \"/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { uniqWith } from 'ramda';\nimport { isArrayElement, isObjectElement, deepmerge, toValue, cloneShallow, includesClasses } from '@swagger-api/apidom-core';\nimport { isSchemaElement } from '@swagger-api/apidom-ns-openapi-3-1';\nimport toPath from '../utils/to-path.js';\nclass AllOfVisitor {\n  constructor(_ref) {\n    let {\n      options\n    } = _ref;\n    _defineProperty(this, \"options\", void 0);\n    _defineProperty(this, \"SchemaElement\", {\n      leave(schemaElement, key, parent, path, ancestors) {\n        // do nothing\n        if (typeof schemaElement.allOf === 'undefined') return undefined;\n\n        // collect error and return if allOf keyword is not an array\n        if (!isArrayElement(schemaElement.allOf)) {\n          var _this$options$derefer, _this$options$derefer2;\n          const error = new TypeError('allOf must be an array');\n          error.fullPath = [...toPath([...ancestors, parent, schemaElement]), 'allOf'];\n          (_this$options$derefer = this.options.dereference.dereferenceOpts) === null || _this$options$derefer === void 0 || (_this$options$derefer = _this$options$derefer.errors) === null || _this$options$derefer === void 0 || (_this$options$derefer2 = _this$options$derefer.push) === null || _this$options$derefer2 === void 0 || _this$options$derefer2.call(_this$options$derefer, error);\n          return undefined;\n        }\n\n        // remove allOf keyword if empty\n        if (schemaElement.allOf.isEmpty) {\n          schemaElement.remove('allOf');\n          return undefined;\n        }\n\n        // collect errors if allOf keyword contains anything else than Schema Object\n        const includesSchemaElementOnly = schemaElement.allOf.content.every(isSchemaElement);\n        if (!includesSchemaElementOnly) {\n          var _this$options$derefer3, _this$options$derefer4;\n          const error = new TypeError('Elements in allOf must be objects');\n          error.fullPath = [...toPath([...ancestors, parent, schemaElement]), 'allOf'];\n          (_this$options$derefer3 = this.options.dereference.dereferenceOpts) === null || _this$options$derefer3 === void 0 || (_this$options$derefer3 = _this$options$derefer3.errors) === null || _this$options$derefer3 === void 0 || (_this$options$derefer4 = _this$options$derefer3.push) === null || _this$options$derefer4 === void 0 || _this$options$derefer4.call(_this$options$derefer3, error);\n          return undefined;\n        }\n        while (schemaElement.hasKey('allOf')) {\n          const {\n            allOf\n          } = schemaElement;\n          schemaElement.remove('allOf');\n          const allOfMerged = deepmerge.all([...allOf.content, schemaElement], {\n            customMerge: keyElement => {\n              if (toValue(keyElement) === 'enum') {\n                return (targetElement, sourceElement) => {\n                  if (includesClasses(['json-schema-enum'], targetElement) && includesClasses(['json-schema-enum'], sourceElement)) {\n                    const areElementsEqual = (a, b) => {\n                      if (isArrayElement(a) || isArrayElement(b) || isObjectElement(a) || isObjectElement(b)) {\n                        return false;\n                      }\n                      return a.equals(toValue(b));\n                    };\n                    const clone = cloneShallow(targetElement);\n                    clone.content = uniqWith(areElementsEqual)([...targetElement.content, ...sourceElement.content]);\n                    return clone;\n                  }\n                  return deepmerge(targetElement, sourceElement);\n                };\n              }\n              return deepmerge;\n            }\n          });\n\n          /**\n           * If there was not an original $$ref value, make sure to remove\n           * any $$ref value that may exist from the result of `allOf` merges.\n           */\n          if (!schemaElement.hasKey('$$ref')) {\n            allOfMerged.remove('$$ref');\n          }\n\n          /**\n           * If there was an example keyword in the original schema,\n           * keep it instead of merging with example from other schema.\n           */\n          if (schemaElement.hasKey('example')) {\n            const member = allOfMerged.getMember('example');\n            if (member) {\n              member.value = schemaElement.get('example');\n            }\n          }\n\n          /**\n           * If there was an examples keyword in the original schema,\n           * keep it instead of merging with examples from other schema.\n           */\n          if (schemaElement.hasKey('examples')) {\n            const member = allOfMerged.getMember('examples');\n            if (member) {\n              member.value = schemaElement.get('examples');\n            }\n          }\n          schemaElement.content = allOfMerged.content;\n        }\n        return undefined;\n      }\n    });\n    this.options = options;\n  }\n}\nexport default AllOfVisitor;","map":{"version":3,"names":["uniqWith","isArrayElement","isObjectElement","deepmerge","toValue","cloneShallow","includesClasses","isSchemaElement","toPath","AllOfVisitor","constructor","_ref","options","_defineProperty","leave","schemaElement","key","parent","path","ancestors","allOf","undefined","_this$options$derefer","_this$options$derefer2","error","TypeError","fullPath","dereference","dereferenceOpts","errors","push","call","isEmpty","remove","includesSchemaElementOnly","content","every","_this$options$derefer3","_this$options$derefer4","hasKey","allOfMerged","all","customMerge","keyElement","targetElement","sourceElement","areElementsEqual","a","b","equals","clone","member","getMember","value","get"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/swagger-client/es/resolver/apidom/reference/dereference/strategies/openapi-3-1-swagger-client/visitors/all-of.js"],"sourcesContent":["import { uniqWith } from 'ramda';\nimport { isArrayElement, isObjectElement, deepmerge, toValue, cloneShallow, includesClasses } from '@swagger-api/apidom-core';\nimport { isSchemaElement } from '@swagger-api/apidom-ns-openapi-3-1';\nimport toPath from '../utils/to-path.js';\nclass AllOfVisitor {\n  options;\n  SchemaElement = {\n    leave(schemaElement, key, parent, path, ancestors) {\n      // do nothing\n      if (typeof schemaElement.allOf === 'undefined') return undefined;\n\n      // collect error and return if allOf keyword is not an array\n      if (!isArrayElement(schemaElement.allOf)) {\n        var _this$options$derefer, _this$options$derefer2;\n        const error = new TypeError('allOf must be an array');\n        error.fullPath = [...toPath([...ancestors, parent, schemaElement]), 'allOf'];\n        (_this$options$derefer = this.options.dereference.dereferenceOpts) === null || _this$options$derefer === void 0 || (_this$options$derefer = _this$options$derefer.errors) === null || _this$options$derefer === void 0 || (_this$options$derefer2 = _this$options$derefer.push) === null || _this$options$derefer2 === void 0 || _this$options$derefer2.call(_this$options$derefer, error);\n        return undefined;\n      }\n\n      // remove allOf keyword if empty\n      if (schemaElement.allOf.isEmpty) {\n        schemaElement.remove('allOf');\n        return undefined;\n      }\n\n      // collect errors if allOf keyword contains anything else than Schema Object\n      const includesSchemaElementOnly = schemaElement.allOf.content.every(isSchemaElement);\n      if (!includesSchemaElementOnly) {\n        var _this$options$derefer3, _this$options$derefer4;\n        const error = new TypeError('Elements in allOf must be objects');\n        error.fullPath = [...toPath([...ancestors, parent, schemaElement]), 'allOf'];\n        (_this$options$derefer3 = this.options.dereference.dereferenceOpts) === null || _this$options$derefer3 === void 0 || (_this$options$derefer3 = _this$options$derefer3.errors) === null || _this$options$derefer3 === void 0 || (_this$options$derefer4 = _this$options$derefer3.push) === null || _this$options$derefer4 === void 0 || _this$options$derefer4.call(_this$options$derefer3, error);\n        return undefined;\n      }\n      while (schemaElement.hasKey('allOf')) {\n        const {\n          allOf\n        } = schemaElement;\n        schemaElement.remove('allOf');\n        const allOfMerged = deepmerge.all([...allOf.content, schemaElement], {\n          customMerge: keyElement => {\n            if (toValue(keyElement) === 'enum') {\n              return (targetElement, sourceElement) => {\n                if (includesClasses(['json-schema-enum'], targetElement) && includesClasses(['json-schema-enum'], sourceElement)) {\n                  const areElementsEqual = (a, b) => {\n                    if (isArrayElement(a) || isArrayElement(b) || isObjectElement(a) || isObjectElement(b)) {\n                      return false;\n                    }\n                    return a.equals(toValue(b));\n                  };\n                  const clone = cloneShallow(targetElement);\n                  clone.content = uniqWith(areElementsEqual)([...targetElement.content, ...sourceElement.content]);\n                  return clone;\n                }\n                return deepmerge(targetElement, sourceElement);\n              };\n            }\n            return deepmerge;\n          }\n        });\n\n        /**\n         * If there was not an original $$ref value, make sure to remove\n         * any $$ref value that may exist from the result of `allOf` merges.\n         */\n        if (!schemaElement.hasKey('$$ref')) {\n          allOfMerged.remove('$$ref');\n        }\n\n        /**\n         * If there was an example keyword in the original schema,\n         * keep it instead of merging with example from other schema.\n         */\n        if (schemaElement.hasKey('example')) {\n          const member = allOfMerged.getMember('example');\n          if (member) {\n            member.value = schemaElement.get('example');\n          }\n        }\n\n        /**\n         * If there was an examples keyword in the original schema,\n         * keep it instead of merging with examples from other schema.\n         */\n        if (schemaElement.hasKey('examples')) {\n          const member = allOfMerged.getMember('examples');\n          if (member) {\n            member.value = schemaElement.get('examples');\n          }\n        }\n        schemaElement.content = allOfMerged.content;\n      }\n      return undefined;\n    }\n  };\n  constructor({\n    options\n  }) {\n    this.options = options;\n  }\n}\nexport default AllOfVisitor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}