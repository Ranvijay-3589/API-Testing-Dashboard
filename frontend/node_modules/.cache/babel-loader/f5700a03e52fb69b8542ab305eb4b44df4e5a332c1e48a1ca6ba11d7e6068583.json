{"ast":null,"code":"import _objectSpread from \"/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _objectWithoutProperties from \"/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _defineProperty from \"/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nconst _excluded = [\"specObj\"];\nimport { pathSatisfies, path, pick } from 'ramda';\nimport { isFunction } from 'ramda-adjunct';\nimport { visit, cloneDeep } from '@swagger-api/apidom-core';\nimport Visitor from \"./Visitor.mjs\";\nimport FallbackVisitor from \"./FallbackVisitor.mjs\";\n/**\n * This is a base Type for every visitor that does\n * internal look-ups to retrieve other child visitors.\n * @public\n */\n/**\n * @public\n */\nclass SpecificationVisitor extends Visitor {\n  constructor(_ref) {\n    let {\n        specObj\n      } = _ref,\n      rest = _objectWithoutProperties(_ref, _excluded);\n    super(_objectSpread({}, rest));\n    _defineProperty(this, \"specObj\", void 0);\n    _defineProperty(this, \"passingOptionsNames\", ['specObj', 'parent']);\n    this.specObj = specObj;\n  }\n  retrievePassingOptions() {\n    return pick(this.passingOptionsNames, this);\n  }\n  retrieveFixedFields(specPath) {\n    const fixedFields = path(['visitors', ...specPath, 'fixedFields'], this.specObj);\n    if (typeof fixedFields === 'object' && fixedFields !== null) {\n      return Object.keys(fixedFields);\n    }\n    return [];\n  }\n  retrieveVisitor(specPath) {\n    if (pathSatisfies(isFunction, ['visitors', ...specPath], this.specObj)) {\n      return path(['visitors', ...specPath], this.specObj);\n    }\n    return path(['visitors', ...specPath, '$visitor'], this.specObj);\n  }\n  retrieveVisitorInstance(specPath) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const passingOpts = this.retrievePassingOptions();\n    const VisitorClz = this.retrieveVisitor(specPath);\n    const visitorOpts = _objectSpread(_objectSpread({}, passingOpts), options);\n    return new VisitorClz(visitorOpts);\n  }\n  toRefractedElement(specPath, element) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    /**\n     * This is `Visitor shortcut`: mechanism for short-circuiting the traversal and replacing\n     * it by basic node cloning.\n     *\n     * Visiting the element is equivalent to cloning it  if the prototype of a visitor\n     * is the same as the prototype of FallbackVisitor. If that's the case, we can avoid\n     * bootstrapping the traversal cycle for fields that don't require any special visiting.\n     */\n    const visitor = this.retrieveVisitorInstance(specPath, options);\n    if (visitor instanceof FallbackVisitor && (visitor === null || visitor === void 0 ? void 0 : visitor.constructor) === FallbackVisitor) {\n      return cloneDeep(element);\n    }\n    visit(element, visitor, options);\n    return visitor.element;\n  }\n}\nexport default SpecificationVisitor;","map":{"version":3,"names":["pathSatisfies","path","pick","isFunction","visit","cloneDeep","Visitor","FallbackVisitor","SpecificationVisitor","constructor","_ref","specObj","rest","_objectWithoutProperties","_excluded","_objectSpread","_defineProperty","retrievePassingOptions","passingOptionsNames","retrieveFixedFields","specPath","fixedFields","Object","keys","retrieveVisitor","retrieveVisitorInstance","options","arguments","length","undefined","passingOpts","VisitorClz","visitorOpts","toRefractedElement","element","visitor"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@swagger-api/apidom-ns-json-schema-draft-4/src/refractor/visitors/SpecificationVisitor.mjs"],"sourcesContent":["import { pathSatisfies, path, pick } from 'ramda';\nimport { isFunction } from 'ramda-adjunct';\nimport { visit, cloneDeep } from '@swagger-api/apidom-core';\nimport Visitor from \"./Visitor.mjs\";\nimport FallbackVisitor from \"./FallbackVisitor.mjs\";\n/**\n * This is a base Type for every visitor that does\n * internal look-ups to retrieve other child visitors.\n * @public\n */\n/**\n * @public\n */\nclass SpecificationVisitor extends Visitor {\n  specObj;\n  passingOptionsNames = ['specObj', 'parent'];\n  constructor({\n    specObj,\n    ...rest\n  }) {\n    super({\n      ...rest\n    });\n    this.specObj = specObj;\n  }\n  retrievePassingOptions() {\n    return pick(this.passingOptionsNames, this);\n  }\n  retrieveFixedFields(specPath) {\n    const fixedFields = path(['visitors', ...specPath, 'fixedFields'], this.specObj);\n    if (typeof fixedFields === 'object' && fixedFields !== null) {\n      return Object.keys(fixedFields);\n    }\n    return [];\n  }\n  retrieveVisitor(specPath) {\n    if (pathSatisfies(isFunction, ['visitors', ...specPath], this.specObj)) {\n      return path(['visitors', ...specPath], this.specObj);\n    }\n    return path(['visitors', ...specPath, '$visitor'], this.specObj);\n  }\n  retrieveVisitorInstance(specPath, options = {}) {\n    const passingOpts = this.retrievePassingOptions();\n    const VisitorClz = this.retrieveVisitor(specPath);\n    const visitorOpts = {\n      ...passingOpts,\n      ...options\n    };\n    return new VisitorClz(visitorOpts);\n  }\n  toRefractedElement(specPath, element, options = {}) {\n    /**\n     * This is `Visitor shortcut`: mechanism for short-circuiting the traversal and replacing\n     * it by basic node cloning.\n     *\n     * Visiting the element is equivalent to cloning it  if the prototype of a visitor\n     * is the same as the prototype of FallbackVisitor. If that's the case, we can avoid\n     * bootstrapping the traversal cycle for fields that don't require any special visiting.\n     */\n    const visitor = this.retrieveVisitorInstance(specPath, options);\n    if (visitor instanceof FallbackVisitor && (visitor === null || visitor === void 0 ? void 0 : visitor.constructor) === FallbackVisitor) {\n      return cloneDeep(element);\n    }\n    visit(element, visitor, options);\n    return visitor.element;\n  }\n}\nexport default SpecificationVisitor;"],"mappings":";;;;AAAA,SAASA,aAAa,EAAEC,IAAI,EAAEC,IAAI,QAAQ,OAAO;AACjD,SAASC,UAAU,QAAQ,eAAe;AAC1C,SAASC,KAAK,EAAEC,SAAS,QAAQ,0BAA0B;AAC3D,OAAOC,OAAO,MAAM,eAAe;AACnC,OAAOC,eAAe,MAAM,uBAAuB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,oBAAoB,SAASF,OAAO,CAAC;EAGzCG,WAAWA,CAAAC,IAAA,EAGR;IAAA,IAHS;QACVC;MAEF,CAAC,GAAAD,IAAA;MADIE,IAAI,GAAAC,wBAAA,CAAAH,IAAA,EAAAI,SAAA;IAEP,KAAK,CAAAC,aAAA,KACAH,IAAI,CACR,CAAC;IAACI,eAAA;IAAAA,eAAA,8BAPiB,CAAC,SAAS,EAAE,QAAQ,CAAC;IAQzC,IAAI,CAACL,OAAO,GAAGA,OAAO;EACxB;EACAM,sBAAsBA,CAAA,EAAG;IACvB,OAAOf,IAAI,CAAC,IAAI,CAACgB,mBAAmB,EAAE,IAAI,CAAC;EAC7C;EACAC,mBAAmBA,CAACC,QAAQ,EAAE;IAC5B,MAAMC,WAAW,GAAGpB,IAAI,CAAC,CAAC,UAAU,EAAE,GAAGmB,QAAQ,EAAE,aAAa,CAAC,EAAE,IAAI,CAACT,OAAO,CAAC;IAChF,IAAI,OAAOU,WAAW,KAAK,QAAQ,IAAIA,WAAW,KAAK,IAAI,EAAE;MAC3D,OAAOC,MAAM,CAACC,IAAI,CAACF,WAAW,CAAC;IACjC;IACA,OAAO,EAAE;EACX;EACAG,eAAeA,CAACJ,QAAQ,EAAE;IACxB,IAAIpB,aAAa,CAACG,UAAU,EAAE,CAAC,UAAU,EAAE,GAAGiB,QAAQ,CAAC,EAAE,IAAI,CAACT,OAAO,CAAC,EAAE;MACtE,OAAOV,IAAI,CAAC,CAAC,UAAU,EAAE,GAAGmB,QAAQ,CAAC,EAAE,IAAI,CAACT,OAAO,CAAC;IACtD;IACA,OAAOV,IAAI,CAAC,CAAC,UAAU,EAAE,GAAGmB,QAAQ,EAAE,UAAU,CAAC,EAAE,IAAI,CAACT,OAAO,CAAC;EAClE;EACAc,uBAAuBA,CAACL,QAAQ,EAAgB;IAAA,IAAdM,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IAC5C,MAAMG,WAAW,GAAG,IAAI,CAACb,sBAAsB,CAAC,CAAC;IACjD,MAAMc,UAAU,GAAG,IAAI,CAACP,eAAe,CAACJ,QAAQ,CAAC;IACjD,MAAMY,WAAW,GAAAjB,aAAA,CAAAA,aAAA,KACZe,WAAW,GACXJ,OAAO,CACX;IACD,OAAO,IAAIK,UAAU,CAACC,WAAW,CAAC;EACpC;EACAC,kBAAkBA,CAACb,QAAQ,EAAEc,OAAO,EAAgB;IAAA,IAAdR,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IAChD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;IACI,MAAMQ,OAAO,GAAG,IAAI,CAACV,uBAAuB,CAACL,QAAQ,EAAEM,OAAO,CAAC;IAC/D,IAAIS,OAAO,YAAY5B,eAAe,IAAI,CAAC4B,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAAC1B,WAAW,MAAMF,eAAe,EAAE;MACrI,OAAOF,SAAS,CAAC6B,OAAO,CAAC;IAC3B;IACA9B,KAAK,CAAC8B,OAAO,EAAEC,OAAO,EAAET,OAAO,CAAC;IAChC,OAAOS,OAAO,CAACD,OAAO;EACxB;AACF;AACA,eAAe1B,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}