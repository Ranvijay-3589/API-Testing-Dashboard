{"ast":null,"code":"import _objectSpread from \"/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport btoa from '../../helpers/btoa.node.js';\n\n// This function runs after the common function,\n// `src/execute/index.js#buildRequest`\nexport default function buildRequest(options, req) {\n  const {\n    spec,\n    operation,\n    securities,\n    requestContentType,\n    responseContentType,\n    attachContentTypeForEmptyPayload\n  } = options;\n  // Add securities, which are applicable\n  req = applySecurities({\n    request: req,\n    securities,\n    operation,\n    spec\n  });\n  if (req.body || req.form || attachContentTypeForEmptyPayload) {\n    // all following conditionals are Swagger2 only\n    if (requestContentType) {\n      req.headers['Content-Type'] = requestContentType;\n    } else if (Array.isArray(operation.consumes)) {\n      [req.headers['Content-Type']] = operation.consumes;\n    } else if (Array.isArray(spec.consumes)) {\n      [req.headers['Content-Type']] = spec.consumes;\n    } else if (operation.parameters && operation.parameters.filter(p => p.type === 'file').length) {\n      req.headers['Content-Type'] = 'multipart/form-data';\n    } else if (operation.parameters && operation.parameters.filter(p => p.in === 'formData').length) {\n      req.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    }\n  } else if (requestContentType) {\n    const isBodyParamPresent = operation.parameters && operation.parameters.filter(p => p.in === 'body').length > 0;\n    const isFormDataParamPresent = operation.parameters && operation.parameters.filter(p => p.in === 'formData').length > 0;\n    if (isBodyParamPresent || isFormDataParamPresent) {\n      req.headers['Content-Type'] = requestContentType;\n    }\n  }\n  if (!responseContentType && Array.isArray(operation.produces) && operation.produces.length > 0) {\n    req.headers.accept = operation.produces.join(', ');\n  }\n  return req;\n}\n\n// Add security values, to operations - that declare their need on them\nexport function applySecurities(_ref) {\n  let {\n    request,\n    securities = {},\n    operation = {},\n    spec\n  } = _ref;\n  const result = _objectSpread({}, request);\n  const {\n    authorized = {},\n    specSecurity = []\n  } = securities;\n  const security = operation.security || specSecurity;\n  const isAuthorized = authorized && !!Object.keys(authorized).length;\n  const securityDef = spec.securityDefinitions;\n  result.headers = result.headers || {};\n  result.query = result.query || {};\n  if (!Object.keys(securities).length || !isAuthorized || !security || Array.isArray(operation.security) && !operation.security.length) {\n    return request;\n  }\n  security.forEach(securityObj => {\n    Object.keys(securityObj).forEach(key => {\n      const auth = authorized[key];\n      if (!auth) {\n        return;\n      }\n      const {\n        token\n      } = auth;\n      const value = auth.value || auth;\n      const schema = securityDef[key];\n      const {\n        type\n      } = schema;\n      const tokenName = schema['x-tokenName'] || 'access_token';\n      const oauthToken = token && token[tokenName];\n      let tokenType = token && token.token_type;\n      if (auth) {\n        if (type === 'apiKey') {\n          const inType = schema.in === 'query' ? 'query' : 'headers';\n          result[inType] = result[inType] || {};\n          result[inType][schema.name] = value;\n        } else if (type === 'basic') {\n          if (value.header) {\n            result.headers.authorization = value.header;\n          } else {\n            const username = value.username || '';\n            const password = value.password || '';\n            value.base64 = btoa(\"\".concat(username, \":\").concat(password));\n            result.headers.authorization = \"Basic \".concat(value.base64);\n          }\n        } else if (type === 'oauth2' && oauthToken) {\n          tokenType = !tokenType || tokenType.toLowerCase() === 'bearer' ? 'Bearer' : tokenType;\n          result.headers.authorization = \"\".concat(tokenType, \" \").concat(oauthToken);\n        }\n      }\n    });\n  });\n  return result;\n}","map":{"version":3,"names":["btoa","buildRequest","options","req","spec","operation","securities","requestContentType","responseContentType","attachContentTypeForEmptyPayload","applySecurities","request","body","form","headers","Array","isArray","consumes","parameters","filter","p","type","length","in","isBodyParamPresent","isFormDataParamPresent","produces","accept","join","_ref","result","_objectSpread","authorized","specSecurity","security","isAuthorized","Object","keys","securityDef","securityDefinitions","query","forEach","securityObj","key","auth","token","value","schema","tokenName","oauthToken","tokenType","token_type","inType","name","header","authorization","username","password","base64","concat","toLowerCase"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/swagger-client/es/execute/swagger2/build-request.js"],"sourcesContent":["import btoa from '../../helpers/btoa.node.js';\n\n// This function runs after the common function,\n// `src/execute/index.js#buildRequest`\nexport default function buildRequest(options, req) {\n  const {\n    spec,\n    operation,\n    securities,\n    requestContentType,\n    responseContentType,\n    attachContentTypeForEmptyPayload\n  } = options;\n  // Add securities, which are applicable\n  req = applySecurities({\n    request: req,\n    securities,\n    operation,\n    spec\n  });\n  if (req.body || req.form || attachContentTypeForEmptyPayload) {\n    // all following conditionals are Swagger2 only\n    if (requestContentType) {\n      req.headers['Content-Type'] = requestContentType;\n    } else if (Array.isArray(operation.consumes)) {\n      [req.headers['Content-Type']] = operation.consumes;\n    } else if (Array.isArray(spec.consumes)) {\n      [req.headers['Content-Type']] = spec.consumes;\n    } else if (operation.parameters && operation.parameters.filter(p => p.type === 'file').length) {\n      req.headers['Content-Type'] = 'multipart/form-data';\n    } else if (operation.parameters && operation.parameters.filter(p => p.in === 'formData').length) {\n      req.headers['Content-Type'] = 'application/x-www-form-urlencoded';\n    }\n  } else if (requestContentType) {\n    const isBodyParamPresent = operation.parameters && operation.parameters.filter(p => p.in === 'body').length > 0;\n    const isFormDataParamPresent = operation.parameters && operation.parameters.filter(p => p.in === 'formData').length > 0;\n    if (isBodyParamPresent || isFormDataParamPresent) {\n      req.headers['Content-Type'] = requestContentType;\n    }\n  }\n  if (!responseContentType && Array.isArray(operation.produces) && operation.produces.length > 0) {\n    req.headers.accept = operation.produces.join(', ');\n  }\n  return req;\n}\n\n// Add security values, to operations - that declare their need on them\nexport function applySecurities({\n  request,\n  securities = {},\n  operation = {},\n  spec\n}) {\n  const result = {\n    ...request\n  };\n  const {\n    authorized = {},\n    specSecurity = []\n  } = securities;\n  const security = operation.security || specSecurity;\n  const isAuthorized = authorized && !!Object.keys(authorized).length;\n  const securityDef = spec.securityDefinitions;\n  result.headers = result.headers || {};\n  result.query = result.query || {};\n  if (!Object.keys(securities).length || !isAuthorized || !security || Array.isArray(operation.security) && !operation.security.length) {\n    return request;\n  }\n  security.forEach(securityObj => {\n    Object.keys(securityObj).forEach(key => {\n      const auth = authorized[key];\n      if (!auth) {\n        return;\n      }\n      const {\n        token\n      } = auth;\n      const value = auth.value || auth;\n      const schema = securityDef[key];\n      const {\n        type\n      } = schema;\n      const tokenName = schema['x-tokenName'] || 'access_token';\n      const oauthToken = token && token[tokenName];\n      let tokenType = token && token.token_type;\n      if (auth) {\n        if (type === 'apiKey') {\n          const inType = schema.in === 'query' ? 'query' : 'headers';\n          result[inType] = result[inType] || {};\n          result[inType][schema.name] = value;\n        } else if (type === 'basic') {\n          if (value.header) {\n            result.headers.authorization = value.header;\n          } else {\n            const username = value.username || '';\n            const password = value.password || '';\n            value.base64 = btoa(`${username}:${password}`);\n            result.headers.authorization = `Basic ${value.base64}`;\n          }\n        } else if (type === 'oauth2' && oauthToken) {\n          tokenType = !tokenType || tokenType.toLowerCase() === 'bearer' ? 'Bearer' : tokenType;\n          result.headers.authorization = `${tokenType} ${oauthToken}`;\n        }\n      }\n    });\n  });\n  return result;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}