{"ast":null,"code":"import { reduce } from 'ramda';\nimport { isPrimitiveElement, toValue } from '@swagger-api/apidom-core';\nimport { SchemaElement } from '@swagger-api/apidom-ns-openapi-3-1';\nimport * as url from \"../../../util/url.mjs\";\n/**\n * @public\n */\nexport const resolveSchema$refField = (retrievalURI, schemaElement) => {\n  if (typeof schemaElement.$ref === 'undefined') {\n    return undefined;\n  }\n  const hash = url.getHash(toValue(schemaElement.$ref));\n  const ancestorsSchemaIdentifiers = toValue(schemaElement.meta.get('ancestorsSchemaIdentifiers'));\n  const $refBaseURI = reduce((acc, uri) => {\n    return url.resolve(acc, url.sanitize(url.stripHash(uri)));\n  }, retrievalURI, [...ancestorsSchemaIdentifiers, toValue(schemaElement.$ref)]);\n  return \"\".concat($refBaseURI).concat(hash === '#' ? '' : hash);\n};\n\n/**\n * @public\n */\nexport const resolveSchema$idField = (retrievalURI, schemaElement) => {\n  if (typeof schemaElement.$id === 'undefined') {\n    return undefined;\n  }\n  const ancestorsSchemaIdentifiers = toValue(schemaElement.meta.get('ancestorsSchemaIdentifiers'));\n  return reduce((acc, $id) => {\n    return url.resolve(acc, url.sanitize(url.stripHash($id)));\n  }, retrievalURI, ancestorsSchemaIdentifiers);\n};\n\n/**\n * Cached version of SchemaElement.refract.\n */\nexport const refractToSchemaElement = element => {\n  if (refractToSchemaElement.cache.has(element)) {\n    return refractToSchemaElement.cache.get(element);\n  }\n  const refracted = SchemaElement.refract(element);\n  refractToSchemaElement.cache.set(element, refracted);\n  return refracted;\n};\nrefractToSchemaElement.cache = new WeakMap();\n\n/**\n * @public\n */\nexport const maybeRefractToSchemaElement = element => {\n  /**\n   * Conditional version of refractToSchemaElement, that acts as an identity\n   * function for all non-primitive Element instances.\n   */\n  if (isPrimitiveElement(element)) {\n    return refractToSchemaElement(element);\n  }\n  return element;\n};","map":{"version":3,"names":["reduce","isPrimitiveElement","toValue","SchemaElement","url","resolveSchema$refField","retrievalURI","schemaElement","$ref","undefined","hash","getHash","ancestorsSchemaIdentifiers","meta","get","$refBaseURI","acc","uri","resolve","sanitize","stripHash","concat","resolveSchema$idField","$id","refractToSchemaElement","element","cache","has","refracted","refract","set","WeakMap","maybeRefractToSchemaElement"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@swagger-api/apidom-reference/src/dereference/strategies/openapi-3-1/util.mjs"],"sourcesContent":["import { reduce } from 'ramda';\nimport { isPrimitiveElement, toValue } from '@swagger-api/apidom-core';\nimport { SchemaElement } from '@swagger-api/apidom-ns-openapi-3-1';\nimport * as url from \"../../../util/url.mjs\";\n/**\n * @public\n */\nexport const resolveSchema$refField = (retrievalURI, schemaElement) => {\n  if (typeof schemaElement.$ref === 'undefined') {\n    return undefined;\n  }\n  const hash = url.getHash(toValue(schemaElement.$ref));\n  const ancestorsSchemaIdentifiers = toValue(schemaElement.meta.get('ancestorsSchemaIdentifiers'));\n  const $refBaseURI = reduce((acc, uri) => {\n    return url.resolve(acc, url.sanitize(url.stripHash(uri)));\n  }, retrievalURI, [...ancestorsSchemaIdentifiers, toValue(schemaElement.$ref)]);\n  return `${$refBaseURI}${hash === '#' ? '' : hash}`;\n};\n\n/**\n * @public\n */\nexport const resolveSchema$idField = (retrievalURI, schemaElement) => {\n  if (typeof schemaElement.$id === 'undefined') {\n    return undefined;\n  }\n  const ancestorsSchemaIdentifiers = toValue(schemaElement.meta.get('ancestorsSchemaIdentifiers'));\n  return reduce((acc, $id) => {\n    return url.resolve(acc, url.sanitize(url.stripHash($id)));\n  }, retrievalURI, ancestorsSchemaIdentifiers);\n};\n\n/**\n * Cached version of SchemaElement.refract.\n */\nexport const refractToSchemaElement = element => {\n  if (refractToSchemaElement.cache.has(element)) {\n    return refractToSchemaElement.cache.get(element);\n  }\n  const refracted = SchemaElement.refract(element);\n  refractToSchemaElement.cache.set(element, refracted);\n  return refracted;\n};\nrefractToSchemaElement.cache = new WeakMap();\n\n/**\n * @public\n */\nexport const maybeRefractToSchemaElement = element => {\n  /**\n   * Conditional version of refractToSchemaElement, that acts as an identity\n   * function for all non-primitive Element instances.\n   */\n  if (isPrimitiveElement(element)) {\n    return refractToSchemaElement(element);\n  }\n  return element;\n};"],"mappings":"AAAA,SAASA,MAAM,QAAQ,OAAO;AAC9B,SAASC,kBAAkB,EAAEC,OAAO,QAAQ,0BAA0B;AACtE,SAASC,aAAa,QAAQ,oCAAoC;AAClE,OAAO,KAAKC,GAAG,MAAM,uBAAuB;AAC5C;AACA;AACA;AACA,OAAO,MAAMC,sBAAsB,GAAGA,CAACC,YAAY,EAAEC,aAAa,KAAK;EACrE,IAAI,OAAOA,aAAa,CAACC,IAAI,KAAK,WAAW,EAAE;IAC7C,OAAOC,SAAS;EAClB;EACA,MAAMC,IAAI,GAAGN,GAAG,CAACO,OAAO,CAACT,OAAO,CAACK,aAAa,CAACC,IAAI,CAAC,CAAC;EACrD,MAAMI,0BAA0B,GAAGV,OAAO,CAACK,aAAa,CAACM,IAAI,CAACC,GAAG,CAAC,4BAA4B,CAAC,CAAC;EAChG,MAAMC,WAAW,GAAGf,MAAM,CAAC,CAACgB,GAAG,EAAEC,GAAG,KAAK;IACvC,OAAOb,GAAG,CAACc,OAAO,CAACF,GAAG,EAAEZ,GAAG,CAACe,QAAQ,CAACf,GAAG,CAACgB,SAAS,CAACH,GAAG,CAAC,CAAC,CAAC;EAC3D,CAAC,EAAEX,YAAY,EAAE,CAAC,GAAGM,0BAA0B,EAAEV,OAAO,CAACK,aAAa,CAACC,IAAI,CAAC,CAAC,CAAC;EAC9E,UAAAa,MAAA,CAAUN,WAAW,EAAAM,MAAA,CAAGX,IAAI,KAAK,GAAG,GAAG,EAAE,GAAGA,IAAI;AAClD,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMY,qBAAqB,GAAGA,CAAChB,YAAY,EAAEC,aAAa,KAAK;EACpE,IAAI,OAAOA,aAAa,CAACgB,GAAG,KAAK,WAAW,EAAE;IAC5C,OAAOd,SAAS;EAClB;EACA,MAAMG,0BAA0B,GAAGV,OAAO,CAACK,aAAa,CAACM,IAAI,CAACC,GAAG,CAAC,4BAA4B,CAAC,CAAC;EAChG,OAAOd,MAAM,CAAC,CAACgB,GAAG,EAAEO,GAAG,KAAK;IAC1B,OAAOnB,GAAG,CAACc,OAAO,CAACF,GAAG,EAAEZ,GAAG,CAACe,QAAQ,CAACf,GAAG,CAACgB,SAAS,CAACG,GAAG,CAAC,CAAC,CAAC;EAC3D,CAAC,EAAEjB,YAAY,EAAEM,0BAA0B,CAAC;AAC9C,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMY,sBAAsB,GAAGC,OAAO,IAAI;EAC/C,IAAID,sBAAsB,CAACE,KAAK,CAACC,GAAG,CAACF,OAAO,CAAC,EAAE;IAC7C,OAAOD,sBAAsB,CAACE,KAAK,CAACZ,GAAG,CAACW,OAAO,CAAC;EAClD;EACA,MAAMG,SAAS,GAAGzB,aAAa,CAAC0B,OAAO,CAACJ,OAAO,CAAC;EAChDD,sBAAsB,CAACE,KAAK,CAACI,GAAG,CAACL,OAAO,EAAEG,SAAS,CAAC;EACpD,OAAOA,SAAS;AAClB,CAAC;AACDJ,sBAAsB,CAACE,KAAK,GAAG,IAAIK,OAAO,CAAC,CAAC;;AAE5C;AACA;AACA;AACA,OAAO,MAAMC,2BAA2B,GAAGP,OAAO,IAAI;EACpD;AACF;AACA;AACA;EACE,IAAIxB,kBAAkB,CAACwB,OAAO,CAAC,EAAE;IAC/B,OAAOD,sBAAsB,CAACC,OAAO,CAAC;EACxC;EACA,OAAOA,OAAO;AAChB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}