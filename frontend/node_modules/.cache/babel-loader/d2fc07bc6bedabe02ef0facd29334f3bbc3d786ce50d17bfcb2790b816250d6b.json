{"ast":null,"code":"import formatKeyValue from './format.js';\nimport { isFile, isArrayOfFile, FileWithData } from './file.js';\nfunction buildFormData(reqForm) {\n  /**\n   * Build a new FormData instance, support array as field value\n   * OAS2.0 - when collectionFormat is multi\n   * OAS3.0 - when explode of Encoding Object is true\n   *\n   * This function explicitly handles Buffers (for backward compatibility)\n   * if provided as a values to FormData. FormData can only handle USVString\n   * or Blob.\n   *\n   * @param {Object} reqForm - ori req.form\n   * @return {FormData} - new FormData instance\n   */\n  return Object.entries(reqForm).reduce((formData, _ref) => {\n    let [name, input] = _ref;\n    // eslint-disable-next-line no-restricted-syntax\n    for (const [key, value] of formatKeyValue(name, input, true)) {\n      if (Array.isArray(value)) {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const v of value) {\n          if (ArrayBuffer.isView(v)) {\n            const blob = new Blob([v]);\n            formData.append(key, blob);\n          } else {\n            formData.append(key, v);\n          }\n        }\n      } else if (ArrayBuffer.isView(value)) {\n        const blob = new Blob([value]);\n        formData.append(key, blob);\n      } else {\n        formData.append(key, value);\n      }\n    }\n    return formData;\n  }, new FormData());\n}\nexport const stringifyQuery = function (queryObject) {\n  let {\n    encode = true\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const buildNestedParams = (params, key, value) => {\n    if (Array.isArray(value)) {\n      value.reduce((acc, v) => buildNestedParams(params, key, v), params);\n    } else if (value instanceof Date) {\n      params.append(key, value.toISOString());\n    } else if (typeof value === 'object') {\n      Object.entries(value).reduce((acc, _ref2) => {\n        let [k, v] = _ref2;\n        return buildNestedParams(params, \"\".concat(key, \"[\").concat(k, \"]\"), v);\n      }, params);\n    } else {\n      params.append(key, value);\n    }\n    return params;\n  };\n  const params = Object.entries(queryObject).reduce((acc, _ref3) => {\n    let [key, value] = _ref3;\n    return buildNestedParams(acc, key, value);\n  }, new URLSearchParams());\n  const queryString = String(params);\n  return encode ? queryString : decodeURIComponent(queryString);\n};\n\n// Encodes an object using appropriate serializer.\nexport function encodeFormOrQuery(data) {\n  /**\n   * Encode parameter names and values\n   * @param {Object} result - parameter names and values\n   * @param {string} parameterName - Parameter name\n   * @return {object} encoded parameter names and values\n   */\n  const encodedQueryObj = Object.keys(data).reduce((result, parameterName) => {\n    // eslint-disable-next-line no-restricted-syntax\n    for (const [key, value] of formatKeyValue(parameterName, data[parameterName])) {\n      if (value instanceof FileWithData) {\n        result[key] = value.valueOf();\n      } else {\n        result[key] = value;\n      }\n    }\n    return result;\n  }, {});\n  return stringifyQuery(encodedQueryObj, {\n    encode: false\n  });\n}\n\n// If the request has a `query` object, merge it into the request.url, and delete the object\n// If file and/or multipart, also create FormData instance\nexport function serializeRequest() {\n  let req = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const {\n    url = '',\n    query,\n    form\n  } = req;\n  const joinSearch = function () {\n    for (var _len = arguments.length, strs = new Array(_len), _key = 0; _key < _len; _key++) {\n      strs[_key] = arguments[_key];\n    }\n    const search = strs.filter(a => a).join('&'); // Only truthy value\n    return search ? \"?\".concat(search) : ''; // Only add '?' if there is a str\n  };\n  if (form) {\n    const hasFile = Object.keys(form).some(key => {\n      const {\n        value\n      } = form[key];\n      return isFile(value) || isArrayOfFile(value);\n    });\n    const contentType = req.headers['content-type'] || req.headers['Content-Type'];\n    if (hasFile || /multipart\\/form-data/i.test(contentType)) {\n      const formdata = buildFormData(req.form);\n      req.formdata = formdata;\n      req.body = formdata;\n    } else {\n      req.body = encodeFormOrQuery(form);\n    }\n    delete req.form;\n  }\n  if (query) {\n    const [baseUrl, oriSearch] = url.split('?');\n    let newStr = '';\n    if (oriSearch) {\n      const oriQuery = new URLSearchParams(oriSearch);\n      const keysToRemove = Object.keys(query);\n      keysToRemove.forEach(key => oriQuery.delete(key));\n      newStr = String(oriQuery);\n    }\n    const finalStr = joinSearch(newStr, encodeFormOrQuery(query));\n    req.url = baseUrl + finalStr;\n    delete req.query;\n  }\n  return req;\n}","map":{"version":3,"names":["formatKeyValue","isFile","isArrayOfFile","FileWithData","buildFormData","reqForm","Object","entries","reduce","formData","_ref","name","input","key","value","Array","isArray","v","ArrayBuffer","isView","blob","Blob","append","FormData","stringifyQuery","queryObject","encode","arguments","length","undefined","buildNestedParams","params","acc","Date","toISOString","_ref2","k","concat","_ref3","URLSearchParams","queryString","String","decodeURIComponent","encodeFormOrQuery","data","encodedQueryObj","keys","result","parameterName","valueOf","serializeRequest","req","url","query","form","joinSearch","_len","strs","_key","search","filter","a","join","hasFile","some","contentType","headers","test","formdata","body","baseUrl","oriSearch","split","newStr","oriQuery","keysToRemove","forEach","delete","finalStr"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/swagger-client/es/http/serializers/request/index.js"],"sourcesContent":["import formatKeyValue from './format.js';\nimport { isFile, isArrayOfFile, FileWithData } from './file.js';\nfunction buildFormData(reqForm) {\n  /**\n   * Build a new FormData instance, support array as field value\n   * OAS2.0 - when collectionFormat is multi\n   * OAS3.0 - when explode of Encoding Object is true\n   *\n   * This function explicitly handles Buffers (for backward compatibility)\n   * if provided as a values to FormData. FormData can only handle USVString\n   * or Blob.\n   *\n   * @param {Object} reqForm - ori req.form\n   * @return {FormData} - new FormData instance\n   */\n  return Object.entries(reqForm).reduce((formData, [name, input]) => {\n    // eslint-disable-next-line no-restricted-syntax\n    for (const [key, value] of formatKeyValue(name, input, true)) {\n      if (Array.isArray(value)) {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const v of value) {\n          if (ArrayBuffer.isView(v)) {\n            const blob = new Blob([v]);\n            formData.append(key, blob);\n          } else {\n            formData.append(key, v);\n          }\n        }\n      } else if (ArrayBuffer.isView(value)) {\n        const blob = new Blob([value]);\n        formData.append(key, blob);\n      } else {\n        formData.append(key, value);\n      }\n    }\n    return formData;\n  }, new FormData());\n}\nexport const stringifyQuery = (queryObject, {\n  encode = true\n} = {}) => {\n  const buildNestedParams = (params, key, value) => {\n    if (Array.isArray(value)) {\n      value.reduce((acc, v) => buildNestedParams(params, key, v), params);\n    } else if (value instanceof Date) {\n      params.append(key, value.toISOString());\n    } else if (typeof value === 'object') {\n      Object.entries(value).reduce((acc, [k, v]) => buildNestedParams(params, `${key}[${k}]`, v), params);\n    } else {\n      params.append(key, value);\n    }\n    return params;\n  };\n  const params = Object.entries(queryObject).reduce((acc, [key, value]) => buildNestedParams(acc, key, value), new URLSearchParams());\n  const queryString = String(params);\n  return encode ? queryString : decodeURIComponent(queryString);\n};\n\n// Encodes an object using appropriate serializer.\nexport function encodeFormOrQuery(data) {\n  /**\n   * Encode parameter names and values\n   * @param {Object} result - parameter names and values\n   * @param {string} parameterName - Parameter name\n   * @return {object} encoded parameter names and values\n   */\n  const encodedQueryObj = Object.keys(data).reduce((result, parameterName) => {\n    // eslint-disable-next-line no-restricted-syntax\n    for (const [key, value] of formatKeyValue(parameterName, data[parameterName])) {\n      if (value instanceof FileWithData) {\n        result[key] = value.valueOf();\n      } else {\n        result[key] = value;\n      }\n    }\n    return result;\n  }, {});\n  return stringifyQuery(encodedQueryObj, {\n    encode: false\n  });\n}\n\n// If the request has a `query` object, merge it into the request.url, and delete the object\n// If file and/or multipart, also create FormData instance\nexport function serializeRequest(req = {}) {\n  const {\n    url = '',\n    query,\n    form\n  } = req;\n  const joinSearch = (...strs) => {\n    const search = strs.filter(a => a).join('&'); // Only truthy value\n    return search ? `?${search}` : ''; // Only add '?' if there is a str\n  };\n  if (form) {\n    const hasFile = Object.keys(form).some(key => {\n      const {\n        value\n      } = form[key];\n      return isFile(value) || isArrayOfFile(value);\n    });\n    const contentType = req.headers['content-type'] || req.headers['Content-Type'];\n    if (hasFile || /multipart\\/form-data/i.test(contentType)) {\n      const formdata = buildFormData(req.form);\n      req.formdata = formdata;\n      req.body = formdata;\n    } else {\n      req.body = encodeFormOrQuery(form);\n    }\n    delete req.form;\n  }\n  if (query) {\n    const [baseUrl, oriSearch] = url.split('?');\n    let newStr = '';\n    if (oriSearch) {\n      const oriQuery = new URLSearchParams(oriSearch);\n      const keysToRemove = Object.keys(query);\n      keysToRemove.forEach(key => oriQuery.delete(key));\n      newStr = String(oriQuery);\n    }\n    const finalStr = joinSearch(newStr, encodeFormOrQuery(query));\n    req.url = baseUrl + finalStr;\n    delete req.query;\n  }\n  return req;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}