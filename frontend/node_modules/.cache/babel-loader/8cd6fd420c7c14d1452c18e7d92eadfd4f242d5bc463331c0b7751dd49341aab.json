{"ast":null,"code":"import React,{useMemo}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const getStatusBadgeClass=code=>{if(!code||code===0)return'bg-secondary';if(code>=200&&code<300)return'bg-success';if(code>=300&&code<400)return'bg-info';if(code>=400&&code<500)return'bg-warning';return'bg-danger';};const formatXml=xml=>{try{let formatted='';let indent=0;const nodes=xml.replace(/(>)\\s*(<)/g,'$1\\n$2').split('\\n');nodes.forEach(node=>{node=node.trim();if(!node)return;if(node.match(/^<\\/\\w/)){indent=Math.max(0,indent-1);}formatted+='  '.repeat(indent)+node+'\\n';if(node.match(/^<\\w([^>]*[^/])?>/)&&!node.match(/^<\\w[^>]*\\/>/)&&!node.match(/<\\/\\w/)){indent++;}});return formatted.trim();}catch(_unused){return xml;}};const isXml=data=>{if(typeof data!=='string')return false;const trimmed=data.trim();return trimmed.startsWith('<')&&trimmed.endsWith('>');};const URL_REGEX=/https?:\\/\\/[^\\s\"'`,<>}\\])+]+(?:[)\\]](?=[^\\w]|$))?/g;const renderTextWithLinks=text=>{const parts=[];let lastIndex=0;let match;URL_REGEX.lastIndex=0;while((match=URL_REGEX.exec(text))!==null){const url=match[0];const startIdx=match.index;if(startIdx>lastIndex){parts.push(text.slice(lastIndex,startIdx));}parts.push(/*#__PURE__*/_jsx(\"a\",{href:url,target:\"_blank\",rel:\"noopener noreferrer\",style:{color:'#58a6ff',textDecoration:'underline',wordBreak:'break-all'},children:url},startIdx));lastIndex=startIdx+url.length;}if(lastIndex<text.length){parts.push(text.slice(lastIndex));}return parts.length>0?parts:text;};const ResponseViewer=_ref=>{let{response}=_ref;if(!response)return null;const formatResponse=data=>{// Try JSON first\ntry{if(typeof data==='string'){const parsed=JSON.parse(data);return{text:JSON.stringify(parsed,null,2),type:'json'};}if(typeof data==='object'&&data!==null){return{text:JSON.stringify(data,null,2),type:'json'};}}catch(_unused2){// Not JSON\n}// Check if XML\nif(isXml(data)){return{text:formatXml(data),type:'xml'};}// Fallback to string\nreturn{text:String(data),type:'text'};};const{text,type}=formatResponse(response.response_data);const linkedContent=useMemo(()=>renderTextWithLinks(text),[text]);const getTypeLabel=()=>{if(type==='xml')return'XML';if(type==='json')return'JSON';return'Text';};return/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",children:\"Response\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-3 align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-secondary\",children:getTypeLabel()}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge \".concat(getStatusBadgeClass(response.status_code)),children:[\"Status: \",response.status_code||'Error']}),/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-primary\",children:[\"Time: \",response.response_time_ms,\"ms\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"pre\",{className:\"bg-dark text-light p-3 rounded\",style:{maxHeight:'500px',overflow:'auto',fontSize:'0.875rem'},children:linkedContent})})]});};export default ResponseViewer;","map":{"version":3,"names":["React","useMemo","jsx","_jsx","jsxs","_jsxs","getStatusBadgeClass","code","formatXml","xml","formatted","indent","nodes","replace","split","forEach","node","trim","match","Math","max","repeat","_unused","isXml","data","trimmed","startsWith","endsWith","URL_REGEX","renderTextWithLinks","text","parts","lastIndex","exec","url","startIdx","index","push","slice","href","target","rel","style","color","textDecoration","wordBreak","children","length","ResponseViewer","_ref","response","formatResponse","parsed","JSON","parse","stringify","type","_unused2","String","response_data","linkedContent","getTypeLabel","className","concat","status_code","response_time_ms","maxHeight","overflow","fontSize"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/src/components/ResponseViewer.js"],"sourcesContent":["import React, { useMemo } from 'react';\n\nconst getStatusBadgeClass = (code) => {\n  if (!code || code === 0) return 'bg-secondary';\n  if (code >= 200 && code < 300) return 'bg-success';\n  if (code >= 300 && code < 400) return 'bg-info';\n  if (code >= 400 && code < 500) return 'bg-warning';\n  return 'bg-danger';\n};\n\nconst formatXml = (xml) => {\n  try {\n    let formatted = '';\n    let indent = 0;\n    const nodes = xml.replace(/(>)\\s*(<)/g, '$1\\n$2').split('\\n');\n\n    nodes.forEach((node) => {\n      node = node.trim();\n      if (!node) return;\n\n      if (node.match(/^<\\/\\w/)) {\n        indent = Math.max(0, indent - 1);\n      }\n\n      formatted += '  '.repeat(indent) + node + '\\n';\n\n      if (\n        node.match(/^<\\w([^>]*[^/])?>/) &&\n        !node.match(/^<\\w[^>]*\\/>/) &&\n        !node.match(/<\\/\\w/)\n      ) {\n        indent++;\n      }\n    });\n\n    return formatted.trim();\n  } catch {\n    return xml;\n  }\n};\n\nconst isXml = (data) => {\n  if (typeof data !== 'string') return false;\n  const trimmed = data.trim();\n  return trimmed.startsWith('<') && trimmed.endsWith('>');\n};\n\nconst URL_REGEX = /https?:\\/\\/[^\\s\"'`,<>}\\])+]+(?:[)\\]](?=[^\\w]|$))?/g;\n\nconst renderTextWithLinks = (text) => {\n  const parts = [];\n  let lastIndex = 0;\n  let match;\n\n  URL_REGEX.lastIndex = 0;\n  while ((match = URL_REGEX.exec(text)) !== null) {\n    const url = match[0];\n    const startIdx = match.index;\n\n    if (startIdx > lastIndex) {\n      parts.push(text.slice(lastIndex, startIdx));\n    }\n\n    parts.push(\n      <a\n        key={startIdx}\n        href={url}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        style={{ color: '#58a6ff', textDecoration: 'underline', wordBreak: 'break-all' }}\n      >\n        {url}\n      </a>\n    );\n\n    lastIndex = startIdx + url.length;\n  }\n\n  if (lastIndex < text.length) {\n    parts.push(text.slice(lastIndex));\n  }\n\n  return parts.length > 0 ? parts : text;\n};\n\nconst ResponseViewer = ({ response }) => {\n  if (!response) return null;\n\n  const formatResponse = (data) => {\n    // Try JSON first\n    try {\n      if (typeof data === 'string') {\n        const parsed = JSON.parse(data);\n        return { text: JSON.stringify(parsed, null, 2), type: 'json' };\n      }\n      if (typeof data === 'object' && data !== null) {\n        return { text: JSON.stringify(data, null, 2), type: 'json' };\n      }\n    } catch {\n      // Not JSON\n    }\n\n    // Check if XML\n    if (isXml(data)) {\n      return { text: formatXml(data), type: 'xml' };\n    }\n\n    // Fallback to string\n    return { text: String(data), type: 'text' };\n  };\n\n  const { text, type } = formatResponse(response.response_data);\n  const linkedContent = useMemo(() => renderTextWithLinks(text), [text]);\n\n  const getTypeLabel = () => {\n    if (type === 'xml') return 'XML';\n    if (type === 'json') return 'JSON';\n    return 'Text';\n  };\n\n  return (\n    <div className=\"card mt-4\">\n      <div className=\"card-header d-flex justify-content-between align-items-center\">\n        <h5 className=\"mb-0\">Response</h5>\n        <div className=\"d-flex gap-3 align-items-center\">\n          <span className=\"badge bg-secondary\">\n            {getTypeLabel()}\n          </span>\n          <span className={`badge ${getStatusBadgeClass(response.status_code)}`}>\n            Status: {response.status_code || 'Error'}\n          </span>\n          <span className=\"badge bg-primary\">\n            Time: {response.response_time_ms}ms\n          </span>\n        </div>\n      </div>\n      <div className=\"card-body\">\n        <pre\n          className=\"bg-dark text-light p-3 rounded\"\n          style={{ maxHeight: '500px', overflow: 'auto', fontSize: '0.875rem' }}\n        >\n          {linkedContent}\n        </pre>\n      </div>\n    </div>\n  );\n};\n\nexport default ResponseViewer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}