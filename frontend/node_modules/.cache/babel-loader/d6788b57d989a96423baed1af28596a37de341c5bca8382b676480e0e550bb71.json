{"ast":null,"code":"import React,{useState,useCallback}from'react';import{useSearchParams}from'react-router-dom';import SwaggerUI from'swagger-ui-react';import'swagger-ui-react/swagger-ui.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SwaggerPage=()=>{const[searchParams]=useSearchParams();const defaultTab=searchParams.get('tab')==='doc'?'doc':'ui';const[activeTab,setActiveTab]=useState(defaultTab);const[swaggerDoc,setSwaggerDoc]=useState('');const[swaggerLoading,setSwaggerLoading]=useState(false);const[swaggerError,setSwaggerError]=useState('');const apiBase=process.env.REACT_APP_API_BASE_URL||'/mohit/api';const handleDocTab=useCallback(async()=>{setActiveTab('doc');if(swaggerDoc||swaggerLoading)return;setSwaggerError('');setSwaggerLoading(true);try{const res=await fetch(\"\".concat(apiBase,\"/openapi.json\"));if(!res.ok){throw new Error(\"Failed to load OpenAPI JSON (\".concat(res.status,\")\"));}const data=await res.json();setSwaggerDoc(JSON.stringify(data,null,2));}catch(error){setSwaggerError(error.message||'Failed to load OpenAPI JSON');}finally{setSwaggerLoading(false);}},[apiBase,swaggerDoc,swaggerLoading]);return/*#__PURE__*/_jsx(\"div\",{className:\"container py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-3\",children:\"API Documentation\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-sm \".concat(activeTab==='ui'?'btn-primary':'btn-outline-primary'),onClick:()=>setActiveTab('ui'),children:\"Swagger UI\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-sm \".concat(activeTab==='doc'?'btn-primary':'btn-outline-primary'),onClick:handleDocTab,children:\"Swagger Doc\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[activeTab==='ui'&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded border p-2\",style:{maxHeight:'700px',overflow:'auto'},children:/*#__PURE__*/_jsx(SwaggerUI,{url:\"\".concat(apiBase,\"/openapi.json\")})}),activeTab==='doc'&&/*#__PURE__*/_jsxs(_Fragment,{children:[swaggerLoading&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-muted\",children:\"Loading OpenAPI JSON...\"}),swaggerError&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mb-0\",children:swaggerError}),!swaggerLoading&&!swaggerError&&swaggerDoc&&/*#__PURE__*/_jsx(\"pre\",{className:\"bg-dark text-light p-3 rounded\",style:{maxHeight:'500px',overflow:'auto',fontSize:'0.875rem'},children:swaggerDoc})]})]})]})});};export default SwaggerPage;","map":{"version":3,"names":["React","useState","useCallback","useSearchParams","SwaggerUI","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SwaggerPage","searchParams","defaultTab","get","activeTab","setActiveTab","swaggerDoc","setSwaggerDoc","swaggerLoading","setSwaggerLoading","swaggerError","setSwaggerError","apiBase","process","env","REACT_APP_API_BASE_URL","handleDocTab","res","fetch","concat","ok","Error","status","data","json","JSON","stringify","error","message","className","children","type","onClick","style","maxHeight","overflow","url","fontSize"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/src/pages/SwaggerPage.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport SwaggerUI from 'swagger-ui-react';\nimport 'swagger-ui-react/swagger-ui.css';\n\nconst SwaggerPage = () => {\n  const [searchParams] = useSearchParams();\n  const defaultTab = searchParams.get('tab') === 'doc' ? 'doc' : 'ui';\n\n  const [activeTab, setActiveTab] = useState(defaultTab);\n  const [swaggerDoc, setSwaggerDoc] = useState('');\n  const [swaggerLoading, setSwaggerLoading] = useState(false);\n  const [swaggerError, setSwaggerError] = useState('');\n\n  const apiBase = process.env.REACT_APP_API_BASE_URL || '/mohit/api';\n\n  const handleDocTab = useCallback(async () => {\n    setActiveTab('doc');\n    if (swaggerDoc || swaggerLoading) return;\n\n    setSwaggerError('');\n    setSwaggerLoading(true);\n    try {\n      const res = await fetch(`${apiBase}/openapi.json`);\n      if (!res.ok) {\n        throw new Error(`Failed to load OpenAPI JSON (${res.status})`);\n      }\n      const data = await res.json();\n      setSwaggerDoc(JSON.stringify(data, null, 2));\n    } catch (error) {\n      setSwaggerError(error.message || 'Failed to load OpenAPI JSON');\n    } finally {\n      setSwaggerLoading(false);\n    }\n  }, [apiBase, swaggerDoc, swaggerLoading]);\n\n  return (\n    <div className=\"container py-4\">\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <h5 className=\"mb-3\">API Documentation</h5>\n          <div className=\"d-flex gap-2\">\n            <button\n              type=\"button\"\n              className={`btn btn-sm ${activeTab === 'ui' ? 'btn-primary' : 'btn-outline-primary'}`}\n              onClick={() => setActiveTab('ui')}\n            >\n              Swagger UI\n            </button>\n            <button\n              type=\"button\"\n              className={`btn btn-sm ${activeTab === 'doc' ? 'btn-primary' : 'btn-outline-primary'}`}\n              onClick={handleDocTab}\n            >\n              Swagger Doc\n            </button>\n          </div>\n        </div>\n        <div className=\"card-body\">\n          {activeTab === 'ui' && (\n            <div className=\"bg-white rounded border p-2\" style={{ maxHeight: '700px', overflow: 'auto' }}>\n              <SwaggerUI url={`${apiBase}/openapi.json`} />\n            </div>\n          )}\n\n          {activeTab === 'doc' && (\n            <>\n              {swaggerLoading && <p className=\"mb-0 text-muted\">Loading OpenAPI JSON...</p>}\n              {swaggerError && <div className=\"alert alert-danger mb-0\">{swaggerError}</div>}\n              {!swaggerLoading && !swaggerError && swaggerDoc && (\n                <pre\n                  className=\"bg-dark text-light p-3 rounded\"\n                  style={{ maxHeight: '500px', overflow: 'auto', fontSize: '0.875rem' }}\n                >\n                  {swaggerDoc}\n                </pre>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SwaggerPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}