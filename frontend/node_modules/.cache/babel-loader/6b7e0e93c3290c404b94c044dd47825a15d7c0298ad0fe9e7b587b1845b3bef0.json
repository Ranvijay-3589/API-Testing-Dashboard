{"ast":null,"code":"import _defineProperty from \"/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { StringElement } from 'minim';\nimport ShortUniqueId from 'short-unique-id';\nimport ElementIdentityError from \"./errors/ElementIdentityError.mjs\";\nimport { isElement, isStringElement } from \"../predicates/index.mjs\";\n/**\n * @public\n */\nexport class IdentityManager {\n  constructor() {\n    let {\n      length = 6\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _defineProperty(this, \"uuid\", void 0);\n    _defineProperty(this, \"identityMap\", void 0);\n    this.uuid = new ShortUniqueId({\n      length\n    });\n    this.identityMap = new WeakMap();\n  }\n  identify(element) {\n    if (!isElement(element)) {\n      throw new ElementIdentityError('Cannot not identify the element. `element` is neither structurally compatible nor a subclass of an Element class.', {\n        value: element\n      });\n    }\n\n    // use already assigned identity\n    if (element.meta.hasKey('id') && isStringElement(element.meta.get('id')) && !element.meta.get('id').equals('')) {\n      return element.id;\n    }\n\n    // assign identity in immutable way\n    if (this.identityMap.has(element)) {\n      return this.identityMap.get(element);\n    }\n\n    // return element identity\n    const id = new StringElement(this.generateId());\n    this.identityMap.set(element, id);\n    return id;\n  }\n  forget(element) {\n    if (this.identityMap.has(element)) {\n      this.identityMap.delete(element);\n      return true;\n    }\n    return false;\n  }\n  generateId() {\n    return this.uuid.randomUUID();\n  }\n}\n\n/**\n * @public\n */\nexport const defaultIdentityManager = new IdentityManager();","map":{"version":3,"names":["StringElement","ShortUniqueId","ElementIdentityError","isElement","isStringElement","IdentityManager","constructor","length","arguments","undefined","_defineProperty","uuid","identityMap","WeakMap","identify","element","value","meta","hasKey","get","equals","id","has","generateId","set","forget","delete","randomUUID","defaultIdentityManager"],"sources":["/var/www/ranvijay.capricorn.online/mohit/frontend/node_modules/@swagger-api/apidom-core/src/identity/index.mjs"],"sourcesContent":["import { StringElement } from 'minim';\nimport ShortUniqueId from 'short-unique-id';\nimport ElementIdentityError from \"./errors/ElementIdentityError.mjs\";\nimport { isElement, isStringElement } from \"../predicates/index.mjs\";\n/**\n * @public\n */\nexport class IdentityManager {\n  uuid;\n  identityMap;\n  constructor({\n    length = 6\n  } = {}) {\n    this.uuid = new ShortUniqueId({\n      length\n    });\n    this.identityMap = new WeakMap();\n  }\n  identify(element) {\n    if (!isElement(element)) {\n      throw new ElementIdentityError('Cannot not identify the element. `element` is neither structurally compatible nor a subclass of an Element class.', {\n        value: element\n      });\n    }\n\n    // use already assigned identity\n    if (element.meta.hasKey('id') && isStringElement(element.meta.get('id')) && !element.meta.get('id').equals('')) {\n      return element.id;\n    }\n\n    // assign identity in immutable way\n    if (this.identityMap.has(element)) {\n      return this.identityMap.get(element);\n    }\n\n    // return element identity\n    const id = new StringElement(this.generateId());\n    this.identityMap.set(element, id);\n    return id;\n  }\n  forget(element) {\n    if (this.identityMap.has(element)) {\n      this.identityMap.delete(element);\n      return true;\n    }\n    return false;\n  }\n  generateId() {\n    return this.uuid.randomUUID();\n  }\n}\n\n/**\n * @public\n */\nexport const defaultIdentityManager = new IdentityManager();"],"mappings":";AAAA,SAASA,aAAa,QAAQ,OAAO;AACrC,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,oBAAoB,MAAM,mCAAmC;AACpE,SAASC,SAAS,EAAEC,eAAe,QAAQ,yBAAyB;AACpE;AACA;AACA;AACA,OAAO,MAAMC,eAAe,CAAC;EAG3BC,WAAWA,CAAA,EAEH;IAAA,IAFI;MACVC,MAAM,GAAG;IACX,CAAC,GAAAC,SAAA,CAAAD,MAAA,QAAAC,SAAA,QAAAC,SAAA,GAAAD,SAAA,MAAG,CAAC,CAAC;IAAAE,eAAA;IAAAA,eAAA;IACJ,IAAI,CAACC,IAAI,GAAG,IAAIV,aAAa,CAAC;MAC5BM;IACF,CAAC,CAAC;IACF,IAAI,CAACK,WAAW,GAAG,IAAIC,OAAO,CAAC,CAAC;EAClC;EACAC,QAAQA,CAACC,OAAO,EAAE;IAChB,IAAI,CAACZ,SAAS,CAACY,OAAO,CAAC,EAAE;MACvB,MAAM,IAAIb,oBAAoB,CAAC,mHAAmH,EAAE;QAClJc,KAAK,EAAED;MACT,CAAC,CAAC;IACJ;;IAEA;IACA,IAAIA,OAAO,CAACE,IAAI,CAACC,MAAM,CAAC,IAAI,CAAC,IAAId,eAAe,CAACW,OAAO,CAACE,IAAI,CAACE,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAACJ,OAAO,CAACE,IAAI,CAACE,GAAG,CAAC,IAAI,CAAC,CAACC,MAAM,CAAC,EAAE,CAAC,EAAE;MAC9G,OAAOL,OAAO,CAACM,EAAE;IACnB;;IAEA;IACA,IAAI,IAAI,CAACT,WAAW,CAACU,GAAG,CAACP,OAAO,CAAC,EAAE;MACjC,OAAO,IAAI,CAACH,WAAW,CAACO,GAAG,CAACJ,OAAO,CAAC;IACtC;;IAEA;IACA,MAAMM,EAAE,GAAG,IAAIrB,aAAa,CAAC,IAAI,CAACuB,UAAU,CAAC,CAAC,CAAC;IAC/C,IAAI,CAACX,WAAW,CAACY,GAAG,CAACT,OAAO,EAAEM,EAAE,CAAC;IACjC,OAAOA,EAAE;EACX;EACAI,MAAMA,CAACV,OAAO,EAAE;IACd,IAAI,IAAI,CAACH,WAAW,CAACU,GAAG,CAACP,OAAO,CAAC,EAAE;MACjC,IAAI,CAACH,WAAW,CAACc,MAAM,CAACX,OAAO,CAAC;MAChC,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd;EACAQ,UAAUA,CAAA,EAAG;IACX,OAAO,IAAI,CAACZ,IAAI,CAACgB,UAAU,CAAC,CAAC;EAC/B;AACF;;AAEA;AACA;AACA;AACA,OAAO,MAAMC,sBAAsB,GAAG,IAAIvB,eAAe,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}